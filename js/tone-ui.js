!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("Tone"));else if("function"==typeof define&&define.amd)define(["Tone"],e);else{var r="object"==typeof exports?e(require("Tone")):e(t.Tone);for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(window,(function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=47)}([function(t,e,r){"use strict";r.r(e),r.d(e,"defaultConverter",(function(){return g})),r.d(e,"notEqual",(function(){return b})),r.d(e,"UpdatingElement",(function(){return S})),r.d(e,"customElement",(function(){return w})),r.d(e,"property",(function(){return M})),r.d(e,"internalProperty",(function(){return x})),r.d(e,"query",(function(){return O})),r.d(e,"queryAsync",(function(){return A})),r.d(e,"queryAll",(function(){return P})),r.d(e,"eventOptions",(function(){return j})),r.d(e,"queryAssignedNodes",(function(){return T})),r.d(e,"html",(function(){return p.f})),r.d(e,"svg",(function(){return p.g})),r.d(e,"TemplateResult",(function(){return p.d})),r.d(e,"SVGTemplateResult",(function(){return p.c})),r.d(e,"supportsAdoptingStyleSheets",(function(){return N})),r.d(e,"CSSResult",(function(){return C})),r.d(e,"unsafeCSS",(function(){return D})),r.d(e,"css",(function(){return $})),r.d(e,"LitElement",(function(){return V}));var n=r(4),o=r(1);function i(t,e){const{element:{content:r},parts:n}=t,o=document.createTreeWalker(r,133,null,!1);let i=s(n),a=n[i],c=-1,u=0;const l=[];let p=null;for(;o.nextNode();){c++;const t=o.currentNode;for(t.previousSibling===p&&(p=null),e.has(t)&&(l.push(t),null===p&&(p=t)),null!==p&&u++;void 0!==a&&a.index===c;)a.index=null!==p?-1:a.index-u,i=s(n,i),a=n[i]}l.forEach(t=>t.parentNode.removeChild(t))}const a=t=>{let e=11===t.nodeType?0:1;const r=document.createTreeWalker(t,133,null,!1);for(;r.nextNode();)e++;return e},s=(t,e=-1)=>{for(let r=e+1;r<t.length;r++){const e=t[r];if(Object(o.d)(e))return r}return-1};var c=r(7),u=r(6),l=r(12),p=r(5);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const h=(t,e)=>`${t}--${e}`;let f=!0;void 0===window.ShadyCSS?f=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),f=!1);const d=t=>e=>{const r=h(e.type,t);let n=u.a.get(r);void 0===n&&(n={stringsArray:new WeakMap,keyString:new Map},u.a.set(r,n));let i=n.stringsArray.get(e.strings);if(void 0!==i)return i;const a=e.strings.join(o.f);if(i=n.keyString.get(a),void 0===i){const r=e.getTemplateElement();f&&window.ShadyCSS.prepareTemplateDom(r,t),i=new o.a(e,r),n.keyString.set(a,i)}return n.stringsArray.set(e.strings,i),i},y=["html","svg"],m=new Set,v=(t,e,r)=>{m.add(t);const n=r?r.element:document.createElement("template"),o=e.querySelectorAll("style"),{length:c}=o;if(0===c)return void window.ShadyCSS.prepareTemplateStyles(n,t);const l=document.createElement("style");for(let t=0;t<c;t++){const e=o[t];e.parentNode.removeChild(e),l.textContent+=e.textContent}(t=>{y.forEach(e=>{const r=u.a.get(h(e,t));void 0!==r&&r.keyString.forEach(t=>{const{element:{content:e}}=t,r=new Set;Array.from(e.querySelectorAll("style")).forEach(t=>{r.add(t)}),i(t,r)})})})(t);const p=n.content;r?function(t,e,r=null){const{element:{content:n},parts:o}=t;if(null==r)return void n.appendChild(e);const i=document.createTreeWalker(n,133,null,!1);let c=s(o),u=0,l=-1;for(;i.nextNode();){l++;for(i.currentNode===r&&(u=a(e),r.parentNode.insertBefore(e,r));-1!==c&&o[c].index===l;){if(u>0){for(;-1!==c;)o[c].index+=u,c=s(o,c);return}c=s(o,c)}}}(r,l,p.firstChild):p.insertBefore(l,p.firstChild),window.ShadyCSS.prepareTemplateStyles(n,t);const f=p.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==f)e.insertBefore(f.cloneNode(!0),e.firstChild);else if(r){p.insertBefore(l,p.firstChild);const t=new Set;t.add(l),i(r,t)}};window.JSCompiler_renameProperty=(t,e)=>t;const g={toAttribute(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){switch(e){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},b=(t,e)=>e!==t&&(e==e||t==t),_={attribute:!0,type:String,converter:g,reflect:!1,hasChanged:b};class S extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=new Promise(t=>this._enableUpdatingResolver=t),this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach((e,r)=>{const n=this._attributeNameForProperty(r,e);void 0!==n&&(this._attributeToPropertyMap.set(n,r),t.push(n))}),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach((t,e)=>this._classProperties.set(e,t))}}static createProperty(t,e=_){if(this._ensureClassProperties(),this._classProperties.set(t,e),e.noAccessor||this.prototype.hasOwnProperty(t))return;const r="symbol"==typeof t?Symbol():"__"+t,n=this.getPropertyDescriptor(t,r,e);void 0!==n&&Object.defineProperty(this.prototype,t,n)}static getPropertyDescriptor(t,e,r){return{get(){return this[e]},set(r){const n=this[t];this[e]=r,this._requestUpdate(t,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||_}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty("finalized")||t.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const t=this.properties,e=[...Object.getOwnPropertyNames(t),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]];for(const r of e)this.createProperty(r,t[r])}}static _attributeNameForProperty(t,e){const r=e.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof t?t.toLowerCase():void 0}static _valueHasChanged(t,e,r=b){return r(t,e)}static _propertyValueFromAttribute(t,e){const r=e.type,n=e.converter||g,o="function"==typeof n?n:n.fromAttribute;return o?o(t,r):t}static _propertyValueToAttribute(t,e){if(void 0===e.reflect)return;const r=e.type,n=e.converter;return(n&&n.toAttribute||g.toAttribute)(t,r)}initialize(){this._saveInstanceProperties(),this._requestUpdate()}_saveInstanceProperties(){this.constructor._classProperties.forEach((t,e)=>{if(this.hasOwnProperty(e)){const t=this[e];delete this[e],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(e,t)}})}_applyInstanceProperties(){this._instanceProperties.forEach((t,e)=>this[e]=t),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,e,r){e!==r&&this._attributeToProperty(t,r)}_propertyToAttribute(t,e,r=_){const n=this.constructor,o=n._attributeNameForProperty(t,r);if(void 0!==o){const t=n._propertyValueToAttribute(e,r);if(void 0===t)return;this._updateState=8|this._updateState,null==t?this.removeAttribute(o):this.setAttribute(o,t),this._updateState=-9&this._updateState}}_attributeToProperty(t,e){if(8&this._updateState)return;const r=this.constructor,n=r._attributeToPropertyMap.get(t);if(void 0!==n){const t=r.getPropertyOptions(n);this._updateState=16|this._updateState,this[n]=r._propertyValueFromAttribute(e,t),this._updateState=-17&this._updateState}}_requestUpdate(t,e){let r=!0;if(void 0!==t){const n=this.constructor,o=n.getPropertyOptions(t);n._valueHasChanged(this[t],e,o.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,e),!0!==o.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,o))):r=!1}!this._hasRequestedUpdate&&r&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,e){return this._requestUpdate(t,e),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(t){}const t=this.performUpdate();return null!=t&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){this._instanceProperties&&this._applyInstanceProperties();let t=!1;const e=this._changedProperties;try{t=this.shouldUpdate(e),t?this.update(e):this._markUpdated()}catch(e){throw t=!1,this._markUpdated(),e}t&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(e)),this.updated(e))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((t,e)=>this._propertyToAttribute(e,this[e],t)),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}S.finalized=!0;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const w=t=>e=>"function"==typeof e?((t,e)=>(window.customElements.define(t,e),e))(t,e):((t,e)=>{const{kind:r,elements:n}=e;return{kind:r,elements:n,finisher(e){window.customElements.define(t,e)}}})(t,e),E=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?Object.assign(Object.assign({},e),{finisher(r){r.createProperty(e.key,t)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}};function M(t){return(e,r)=>void 0!==r?((t,e,r)=>{e.constructor.createProperty(r,t)})(t,e,r):E(t,e)}function x(t){return M({attribute:!1,hasChanged:null==t?void 0:t.hasChanged})}function O(t){return(e,r)=>{const n={get(){return this.renderRoot.querySelector(t)},enumerable:!0,configurable:!0};return void 0!==r?I(n,e,r):k(n,e)}}function A(t){return(e,r)=>{const n={async get(){return await this.updateComplete,this.renderRoot.querySelector(t)},enumerable:!0,configurable:!0};return void 0!==r?I(n,e,r):k(n,e)}}function P(t){return(e,r)=>{const n={get(){return this.renderRoot.querySelectorAll(t)},enumerable:!0,configurable:!0};return void 0!==r?I(n,e,r):k(n,e)}}const I=(t,e,r)=>{Object.defineProperty(e,r,t)},k=(t,e)=>({kind:"method",placement:"prototype",key:e.key,descriptor:t});function j(t){return(e,r)=>void 0!==r?((t,e,r)=>{Object.assign(e[r],t)})(t,e,r):((t,e)=>Object.assign(Object.assign({},e),{finisher(r){Object.assign(r.prototype[e.key],t)}}))(t,e)}function T(t="",e=!1){return(r,n)=>{const o={get(){const r="slot"+(t?`[name=${t}]`:""),n=this.renderRoot.querySelector(r);return n&&n.assignedNodes({flatten:e})},enumerable:!0,configurable:!0};return void 0!==n?I(o,r,n):k(o,r)}}
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/const N="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,R=Symbol();class C{constructor(t,e){if(e!==R)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return void 0===this._styleSheet&&(N?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const D=t=>new C(String(t),R),$=(t,...e)=>{const r=e.reduce((e,r,n)=>e+(t=>{if(t instanceof C)return t.cssText;if("number"==typeof t)return t;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${t}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(r)+t[n+1],t[0]);return new C(r,R)};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
(window.litElementVersions||(window.litElementVersions=[])).push("2.3.1");const F={};class V extends S{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const t=this.getStyles();if(void 0===t)this._styles=[];else if(Array.isArray(t)){const e=(t,r)=>t.reduceRight((t,r)=>Array.isArray(r)?e(r,t):(t.add(r),t),r),r=e(t,new Set),n=[];r.forEach(t=>n.unshift(t)),this._styles=n}else this._styles=[t]}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const t=this.constructor._styles;0!==t.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?N?this.renderRoot.adoptedStyleSheets=t.map(t=>t.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map(t=>t.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(t){const e=this.render();super.update(t),e!==F&&this.constructor.render(e,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(t=>{const e=document.createElement("style");e.textContent=t.cssText,this.renderRoot.appendChild(e)}))}render(){return F}}V.finalized=!0,V.render=(t,e,r)=>{if(!r||"object"!=typeof r||!r.scopeName)throw new Error("The `scopeName` option is required.");const o=r.scopeName,i=c.a.has(e),a=f&&11===e.nodeType&&!!e.host,s=a&&!m.has(o),u=s?document.createDocumentFragment():e;if(Object(c.b)(t,u,Object.assign({templateFactory:d(o)},r)),s){const t=c.a.get(u);c.a.delete(u);const r=t.value instanceof l.a?t.value.template:void 0;v(o,u,r),Object(n.b)(e,e.firstChild),e.appendChild(u),c.a.set(e,t)}!i&&a&&window.ShadyCSS.styleElement(e.host)}},function(t,e,r){"use strict";r.d(e,"f",(function(){return n})),r.d(e,"g",(function(){return o})),r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return s})),r.d(e,"d",(function(){return u})),r.d(e,"c",(function(){return l})),r.d(e,"e",(function(){return p}));
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const n=`{{lit-${String(Math.random()).slice(2)}}}`,o=`\x3c!--${n}--\x3e`,i=new RegExp(`${n}|${o}`),a="$lit$";class s{constructor(t,e){this.parts=[],this.element=e;const r=[],o=[],s=document.createTreeWalker(e.content,133,null,!1);let u=0,h=-1,f=0;const{strings:d,values:{length:y}}=t;for(;f<y;){const t=s.nextNode();if(null!==t){if(h++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:r}=e;let n=0;for(let t=0;t<r;t++)c(e[t].name,a)&&n++;for(;n-- >0;){const e=d[f],r=p.exec(e)[2],n=r.toLowerCase()+a,o=t.getAttribute(n);t.removeAttribute(n);const s=o.split(i);this.parts.push({type:"attribute",index:h,name:r,strings:s}),f+=s.length-1}}"TEMPLATE"===t.tagName&&(o.push(t),s.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(n)>=0){const n=t.parentNode,o=e.split(i),s=o.length-1;for(let e=0;e<s;e++){let r,i=o[e];if(""===i)r=l();else{const t=p.exec(i);null!==t&&c(t[2],a)&&(i=i.slice(0,t.index)+t[1]+t[2].slice(0,-a.length)+t[3]),r=document.createTextNode(i)}n.insertBefore(r,t),this.parts.push({type:"node",index:++h})}""===o[s]?(n.insertBefore(l(),t),r.push(t)):t.data=o[s],f+=s}}else if(8===t.nodeType)if(t.data===n){const e=t.parentNode;null!==t.previousSibling&&h!==u||(h++,e.insertBefore(l(),t)),u=h,this.parts.push({type:"node",index:h}),null===t.nextSibling?t.data="":(r.push(t),h--),f++}else{let e=-1;for(;-1!==(e=t.data.indexOf(n,e+1));)this.parts.push({type:"node",index:-1}),f++}}else s.currentNode=o.pop()}for(const t of r)t.parentNode.removeChild(t)}}const c=(t,e)=>{const r=t.length-e.length;return r>=0&&t.slice(r)===e},u=t=>-1!==t.index,l=()=>document.createComment(""),p=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/},function(t,e,r){"use strict";r.d(e,"a",(function(){return p})),r.d(e,"b",(function(){return h})),r.d(e,"e",(function(){return f})),r.d(e,"c",(function(){return d})),r.d(e,"f",(function(){return y})),r.d(e,"g",(function(){return m})),r.d(e,"d",(function(){return g}));var n=r(8),o=r(4),i=r(3),a=r(12),s=r(10),c=r(1);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const u=t=>null===t||!("object"==typeof t||"function"==typeof t),l=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);class p{constructor(t,e,r){this.dirty=!0,this.element=t,this.name=e,this.strings=r,this.parts=[];for(let t=0;t<r.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new h(this)}_getValue(){const t=this.strings,e=t.length-1;let r="";for(let n=0;n<e;n++){r+=t[n];const e=this.parts[n];if(void 0!==e){const t=e.value;if(u(t)||!l(t))r+="string"==typeof t?t:String(t);else for(const e of t)r+="string"==typeof e?e:String(e)}}return r+=t[e],r}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class h{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===i.a||u(t)&&t===this.value||(this.value=t,Object(n.b)(t)||(this.committer.dirty=!0))}commit(){for(;Object(n.b)(this.value);){const t=this.value;this.value=i.a,t(this)}this.value!==i.a&&this.committer.commit()}}class f{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(Object(c.c)()),this.endNode=t.appendChild(Object(c.c)())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=Object(c.c)()),t.__insert(this.endNode=Object(c.c)())}insertAfterPart(t){t.__insert(this.startNode=Object(c.c)()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(null===this.startNode.parentNode)return;for(;Object(n.b)(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=i.a,t(this)}const t=this.__pendingValue;t!==i.a&&(u(t)?t!==this.value&&this.__commitText(t):t instanceof s.b?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):l(t)?this.__commitIterable(t):t===i.b?(this.value=i.b,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,r="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=r:this.__commitNode(document.createTextNode(r)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof a.a&&this.value.template===e)this.value.update(t.values);else{const r=new a.a(e,t.processor,this.options),n=r._clone();r.update(t.values),this.__commitNode(n),this.value=r}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let r,n=0;for(const o of t)r=e[n],void 0===r&&(r=new f(this.options),e.push(r),0===n?r.appendIntoPart(this):r.insertAfterPart(e[n-1])),r.setValue(o),r.commit(),n++;n<e.length&&(e.length=n,this.clear(r&&r.endNode))}clear(t=this.startNode){Object(o.b)(this.startNode.parentNode,t.nextSibling,this.endNode)}}class d{constructor(t,e,r){if(this.value=void 0,this.__pendingValue=void 0,2!==r.length||""!==r[0]||""!==r[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=r}setValue(t){this.__pendingValue=t}commit(){for(;Object(n.b)(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=i.a,t(this)}if(this.__pendingValue===i.a)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=i.a}}class y extends p{constructor(t,e,r){super(t,e,r),this.single=2===r.length&&""===r[0]&&""===r[1]}_createPart(){return new m(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class m extends h{}let v=!1;(()=>{try{const t={get capture(){return v=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();class g{constructor(t,e,r){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=r,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this.__pendingValue=t}commit(){for(;Object(n.b)(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=i.a,t(this)}if(this.__pendingValue===i.a)return;const t=this.__pendingValue,e=this.value,r=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),o=null!=t&&(null==e||r);r&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),o&&(this.__options=b(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=i.a}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const b=t=>t&&(v?{capture:t.capture,passive:t.passive,once:t.once}:t.capture)},function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return o}));
/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const n={},o={}},function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"c",(function(){return o})),r.d(e,"b",(function(){return i}));
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const n="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,o=(t,e,r=null,n=null)=>{for(;e!==r;){const r=e.nextSibling;t.insertBefore(e,n),e=r}},i=(t,e,r=null)=>{for(;e!==r;){const r=e.nextSibling;t.removeChild(e),e=r}}},function(t,e,r){"use strict";r.d(e,"e",(function(){return a.a})),r.d(e,"a",(function(){return n.b})),r.d(e,"b",(function(){return n.g})),r.d(e,"c",(function(){return i.a})),r.d(e,"d",(function(){return i.b})),r.d(e,"f",(function(){return s})),r.d(e,"g",(function(){return c}));var n=r(2);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const o=new class{handleAttributeExpressions(t,e,r,o){const i=e[0];if("."===i){return new n.f(t,e.slice(1),r).parts}if("@"===i)return[new n.d(t,e.slice(1),o.eventContext)];if("?"===i)return[new n.c(t,e.slice(1),r)];return new n.a(t,e,r).parts}handleTextExpression(t){return new n.e(t)}};var i=r(10),a=r(8);r(4),r(3),r(7),r(6),r(12),r(1);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");const s=(t,...e)=>new i.b(t,e,"html",o),c=(t,...e)=>new i.a(t,e,"svg",o)},function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return i}));var n=r(1);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */function o(t){let e=i.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},i.set(t.type,e));let r=e.stringsArray.get(t.strings);if(void 0!==r)return r;const o=t.strings.join(n.f);return r=e.keyString.get(o),void 0===r&&(r=new n.a(t,t.getTemplateElement()),e.keyString.set(o,r)),e.stringsArray.set(t.strings,r),r}const i=new Map},function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return s}));var n=r(4),o=r(2),i=r(6);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const a=new WeakMap,s=(t,e,r)=>{let s=a.get(e);void 0===s&&(Object(n.b)(e,e.firstChild),a.set(e,s=new o.e(Object.assign({templateFactory:i.b},r))),s.appendInto(e)),s.setValue(t),s.commit()}},function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return i}));
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const n=new WeakMap,o=t=>(...e)=>{const r=t(...e);return n.set(r,!0),r},i=t=>"function"==typeof t&&n.has(t)},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.VisBase=void 0;const o=r(0);class i extends o.LitElement{constructor(){super(...arguments),this.bgcolor="white",this.color="black",this.values={},this.height=100,this.width=310,this.normalizeCurve=!0}scale(t,e,r,n,o){return(t-e)/(r-e)*(o-n)+n}draw(t){const e=this.shadowRoot.querySelector("canvas");if(e){const r=e.getContext("2d");e.height=this.height,e.width=this.width;const n=e.width,o=e.height;r.clearRect(0,0,n,o);const i=2048;if(t.length>i){const e=new Float32Array(i);for(let r=0;r<i;r++)e[r]=t[Math.floor(r/i*t.length)];t=e}const a=this.normalizeCurve?1.1*Math.max(.001,...t):1,s=this.normalizeCurve?1.1*Math.min(-.001,...t):0,c=3;r.lineWidth=c,r.beginPath();for(let e=0;e<t.length;e++){const i=t[e],u=this.scale(e,0,t.length,c,n-c),l=this.scale(i,a,s,0,o-c);0===e?r.moveTo(u,l):r.lineTo(u,l)}r.lineCap="round",r.strokeStyle="white",r.stroke()}}updated(){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.generate()},50)}render(){return o.html`
			<style>
				#container {
					margin-top: 5px;
				}

				canvas {
					background-color: #aaa;
					width: 100%;
					border-radius: 4px;
					height: ${this.height}px;
				}
			</style>
			<div id="container">
				<canvas></canvas>
			</div>
		`}}n([o.property({type:String})],i.prototype,"bgcolor",void 0),n([o.property({type:String})],i.prototype,"color",void 0),n([o.property({type:Object})],i.prototype,"values",void 0),n([o.property({type:Number})],i.prototype,"height",void 0),n([o.property({type:Number})],i.prototype,"width",void 0),e.VisBase=i},function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return s}));var n=r(4),o=r(1);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const i=` ${o.f} `;class a{constructor(t,e,r,n){this.strings=t,this.values=e,this.type=r,this.processor=n}getHTML(){const t=this.strings.length-1;let e="",r=!1;for(let n=0;n<t;n++){const t=this.strings[n],a=t.lastIndexOf("\x3c!--");r=(a>-1||r)&&-1===t.indexOf("--\x3e",a+1);const s=o.e.exec(t);e+=null===s?t+(r?i:o.g):t.substr(0,s.index)+s[1]+s[2]+o.b+s[3]+o.f}return e+=this.strings[t],e}getTemplateElement(){const t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}class s extends a{getHTML(){return`<svg>${super.getHTML()}</svg>`}getTemplateElement(){const t=super.getTemplateElement(),e=t.content,r=e.firstChild;return e.removeChild(r),Object(n.c)(e,r.firstChild),t}}},function(t,e,r){"use strict";var n=r(23),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,c=s&&function(){var t={};try{for(var e in s(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),u=function(t,e,r,n){var o;(!(e in t)||"function"==typeof(o=n)&&"[object Function]"===i.call(o)&&n())&&(c?s(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},l=function(t,e){var r=arguments.length>2?arguments[2]:{},i=n(e);o&&(i=a.call(i,Object.getOwnPropertySymbols(e)));for(var s=0;s<i.length;s+=1)u(t,i[s],e[i[s]],r[i[s]])};l.supportsDescriptors=!!c,t.exports=l},function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(4),o=r(1);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class i{constructor(t,e,r){this.__parts=[],this.template=t,this.processor=e,this.options=r}update(t){let e=0;for(const r of this.__parts)void 0!==r&&r.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=n.a?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],r=this.template.parts,i=document.createTreeWalker(t,133,null,!1);let a,s=0,c=0,u=i.nextNode();for(;s<r.length;)if(a=r[s],Object(o.d)(a)){for(;c<a.index;)c++,"TEMPLATE"===u.nodeName&&(e.push(u),i.currentNode=u.content),null===(u=i.nextNode())&&(i.currentNode=e.pop(),u=i.nextNode());if("node"===a.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(u.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(u,a.name,a.strings,this.options));s++}else this.__parts.push(void 0),s++;return n.a&&(document.adoptNode(t),customElements.upgrade(t)),t}}},function(t,e,r){"use strict";var n=TypeError,o=Object.getOwnPropertyDescriptor;if(o)try{o({},"")}catch(t){o=null}var i=function(){throw new n},a=o?function(){try{return i}catch(t){try{return o(arguments,"callee").get}catch(t){return i}}}():i,s=r(14)(),c=Object.getPrototypeOf||function(t){return t.__proto__},u=void 0,l="undefined"==typeof Uint8Array?void 0:c(Uint8Array),p={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":s?c([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":u&&s&&Symbol.asyncIterator?u[Symbol.asyncIterator]():void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":s?c(c([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&s?c((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&s?c((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":s?c(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":s?Symbol:void 0,"%SymbolPrototype%":s?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":a,"%TypedArray%":l,"%TypedArrayPrototype%":l?l.prototype:void 0,"%TypeError%":n,"%TypeErrorPrototype%":n.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},h=r(25).call(Function.call,String.prototype.replace),f=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,d=/\\(\\)?/g,y=function(t){var e=[];return h(t,f,(function(t,r,n,o){e[e.length]=n?h(o,d,"$1"):r||t})),e},m=function(t,e){if(!(t in p))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===p[t]&&!e)throw new n("intrinsic "+t+" exists, but is not available. Please file an issue!");return p[t]};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');for(var r=y(t),i=m("%"+(r.length>0?r[0]:"")+"%",e),a=1;a<r.length;a+=1)if(null!=i)if(o&&a+1>=r.length){var s=o(i,r[a]);if(!e&&!(r[a]in i))throw new n("base intrinsic for "+t+" exists, but the property is not available.");i=s?s.get||s.value:i[r[a]]}else i=i[r[a]];return i}},function(t,e,r){"use strict";(function(e){var n=e.Symbol,o=r(26);t.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&o())))}}).call(this,r(19))},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.createElement=e.ToneAudioNodeElement=void 0;const i=r(0);r(48),r(51),r(52),r(53),r(54);const a=r(95);r(21);let s=class extends i.LitElement{constructor(){super(...arguments),this.open=!0}pathToObject(t,e){const r={};let n=r;return t.forEach((r,o)=>{o===t.length-1?n[r]=e:(n[r]={},n=n[r])}),r}pathToValue(t,e){let r=e,n=void 0;return t.forEach((e,o)=>{o===t.length-1?n=r[e]:r=r[e]}),n}bind(t){return o(this,void 0,void 0,(function*(){this.tone=t,yield this.requestUpdate(),this.shadowRoot.querySelectorAll("tone-visualizer").forEach(t=>{t.bind(this.tone)})}))}setValue(t,e){if(this.tone){const r=this.tone.get();try{this.tone.set(this.pathToObject(t,e.value))}catch(n){const o=this.pathToValue(t,r);this.tone.set(this.pathToObject(t,o)),e.reject(o)}this.requestUpdate()}}renderValue(t,e,r){const n=e[t];return"number"==typeof n?i.html`
				<tone-number
					class="value"
					@value=${t=>this.setValue(r,t.detail)}
					name="${t}"
					value=${n}
				></tone-number>
			`:"string"==typeof n?i.html`
				<tone-string
					class="value"
					@value=${t=>this.setValue(r,t.detail)}
					name="${t}"
					value="${n}"
				></tone-string>
			`:"boolean"==typeof n?i.html`
				<tone-boolean
					class="value"
					@value=${t=>this.setValue(r,t.detail)}
					name="${t}"
					?value=${n}
				></tone-boolean>
			`:Array.isArray(n)?i.html`
				<tone-array
					class="value"
					@value=${t=>this.setValue(r,t.detail)}
					name="${t}"
					value=${JSON.stringify(n)}
				></tone-array>
			`:"object"==typeof n?i.html`
				<details
					class="sub-value"
					@toggle=${t=>t.target.querySelector("mwc-icon").textContent=t.target.open?"arrow_drop_down":"arrow_right"}
				>
					<summary>
						<mwc-icon>
							arrow_right
						</mwc-icon>
						${t}
					</summary>
					<div class="sub-values">
						${this.renderValues(n,[...r])}
					</div>
				</details>
			`:void 0}toneObjFromPath(t){let e=this.tone;return t.forEach(t=>{e=e[t]}),e?e.get():{}}sortValues(t){const e={},r=Object.keys(t);function n(t){return"object"==typeof t&&!Array.isArray(t)}return r.sort().forEach(r=>{const o=t[r];n(o)||(e[r]=o)}),r.sort().forEach(r=>{const o=t[r];n(o)&&Object.keys(o).length&&(e[r]=o)}),e}renderValues(t,e){return t=this.sortValues(t),i.html`
			<tone-visualizer
				path=${JSON.stringify(e)}
				values=${JSON.stringify(this.toneObjFromPath(e))}
			>
			</tone-visualizer>
			${Object.keys(t).map(r=>i.html`
					${this.renderValue(r,t,[...e,r])}
				`)}
		`}static get styles(){return i.css`
			${i.unsafeCSS(a)}
		`}render(){return this.tone?i.html`
				<div id="container">
					<details
						?open=${this.open}
						@toggle=${t=>this.open=t.target.open}
					>
						<summary id="title">
							<mwc-icon>
								${this.open?"keyboard_arrow_down":"keyboard_arrow_right"}
							</mwc-icon>
							<span>
								${this.name}
							</span>
						</summary>
						${this.renderValues(this.tone.get(),[])}
						<details id="json">
							<summary> <mwc-icon>code</mwc-icon> </summary>
							<pre>
${JSON.stringify(this.tone.get(),void 0,"\t")}</pre
							>
						</details>
					</details>
				</div>
			`:i.html`
				<div id="container">
					<h4>${this.name}</h4>
					<div>Set a Tone.js object with 'bind'</div>
				</div>
			`}};n([i.property({type:String})],s.prototype,"name",void 0),n([i.property({type:Boolean})],s.prototype,"open",void 0),s=n([i.customElement("tone-audio-node")],s),e.ToneAudioNodeElement=s,e.createElement=function({tone:t,name:e=t.toString(),parent:r,open:n=!1}){const o=document.createElement("tone-audio-node");return o.bind(t),o.name=e,o.open=n,r&&r.appendChild(o),o}},function(t,e,r){"use strict";var n=r(13),o=r(24),i=o(n("String.prototype.indexOf"));t.exports=function(t,e){var r=n(t,!!e);return"function"==typeof r&&i(t,".prototype.")?o(r):r}},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.ToneValue=void 0;const o=r(0),i=r(49);class a extends o.LitElement{beautifyValue(t){return t}dispatchValue(t){this.dispatchEvent(new CustomEvent("value",{detail:{value:t,reject:t=>{this.value=t,this.shadowRoot.querySelector("#container").classList.add("error"),setTimeout(()=>{this.shadowRoot.querySelector("#container").classList.remove("error")},100),this.reset()}}}))}static get styles(){return o.css`
			${o.unsafeCSS(i)}
		`}render(){return o.html` ${this.name} `}}n([o.property({type:String})],a.prototype,"name",void 0),e.ToneValue=a},function(t,e,r){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=function(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var o=(a=n,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),i=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[r].concat(i).concat([o]).join("\n")}var a,s,c;return[r].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,n){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(n)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);n&&o[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),e.push(c))}},e}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.createFolder=e.ToneFolderElement=void 0;const o=r(0),i=r(15),a=r(97);r(21);let s=class extends o.LitElement{constructor(){super(...arguments),this.open=!0}static get styles(){return o.css`
			${o.unsafeCSS(a)}
		`}add({tone:t,name:e}){const r=i.createElement({tone:t,name:e});return this.appendChild(r),this}render(){return o.html`
			<div id="container" ?open=${this.open}>
				<details
					?open=${this.open}
					@toggle=${t=>this.open=t.target.open}
				>
					<summary>
						<mwc-icon>
							${this.open?"keyboard_arrow_down":"keyboard_arrow_right"}
						</mwc-icon>
						<span>
							${this.name}
						</span>
					</summary>
					<div id="contents">
						<slot></slot>
					</div>
				</details>
			</div>
		`}};n([o.property({type:Boolean})],s.prototype,"open",void 0),n([o.property({type:String})],s.prototype,"name",void 0),s=n([o.customElement("tone-folder")],s),e.ToneFolderElement=s,e.createFolder=function({name:t,parent:e,open:r=!1}){const n=document.createElement("tone-folder");return n.name=t,n.open=r,e&&e.appendChild(n),n}},function(t,e,r){"use strict";r.r(e),r.d(e,"Icon",(function(){return i}));var n=r(0);
/**
@license
Copyright 2018 Google Inc. All Rights Reserved.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/const o=n.css`:host{font-family:var(--mdc-icon-font, "Material Icons");font-weight:normal;font-style:normal;font-size:var(--mdc-icon-size, 24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}`;
/**
@license
Copyright 2018 Google Inc. All Rights Reserved.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/let i=class extends n.LitElement{render(){return n.html`<slot></slot>`}};i.styles=o,i=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}([Object(n.customElement)("mwc-icon")],i)},function(t,e,r){"use strict";r.r(e),r.d(e,"styleMap",(function(){return i}));var n=r(5);
/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const o=new WeakMap,i=Object(n.e)(t=>e=>{if(!(e instanceof n.a)||e instanceof n.b||"style"!==e.committer.name||e.committer.parts.length>1)throw new Error("The `styleMap` directive must be used in the style attribute and must be the only part in the attribute.");const{committer:r}=e,{style:i}=r.element;let a=o.get(e);void 0===a&&(i.cssText=r.strings.join(" "),o.set(e,a=new Set)),a.forEach(e=>{e in t||(a.delete(e),-1===e.indexOf("-")?i[e]=null:i.removeProperty(e))});for(const e in t)a.add(e),-1===e.indexOf("-")?i[e]=t[e]:i.setProperty(e,t[e])})},function(t,e,r){"use strict";var n=Array.prototype.slice,o=r(28),i=Object.keys,a=i?function(t){return i(t)}:r(56),s=Object.keys;a.shim=function(){Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return o(t)?s(n.call(t)):s(t)}):Object.keys=a;return Object.keys||a},t.exports=a},function(t,e,r){"use strict";var n=r(25),o=r(13),i=o("%Function.prototype.apply%"),a=o("%Function.prototype.call%"),s=o("%Reflect.apply%",!0)||n.call(a,i);t.exports=function(){return s(n,a,arguments)},t.exports.apply=function(){return s(n,i,arguments)}},function(t,e,r){"use strict";var n=r(58);t.exports=Function.prototype.bind||n},function(t,e,r){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.createDrawer=e.ToneDrawerElement=void 0;const o=r(0),i=r(15),a=r(20),s=r(99);r(21);let c=class extends o.LitElement{constructor(){super(...arguments),this.open=!0,this.hidden=!1}firstUpdated(t){super.firstUpdated(t),document.body.addEventListener("keypress",t=>{"H"===t.key&&(this.hidden=!this.hidden)})}static get styles(){return o.css`
			${o.unsafeCSS(s)}
		`}add(t){const e=i.createElement(t);return this.appendChild(e),this}folder({name:t,open:e}){const r=a.createFolder({name:t,open:e});return this.appendChild(r),r}render(){return o.html`
			<div id="container" ?open=${this.open} ?hidden=${this.hidden}>
				<details
					?open=${this.open}
					@toggle=${t=>this.open=t.target.open}
				>
					<summary>
						<mwc-icon>
							${this.open?"unfold_less":"unfold_more"}
						</mwc-icon>
						${this.open?"close":"controls"}
					</summary>
					<div id="scroll">
						<div id="inner-scroll">
							<slot></slot>
						</div>
					</div>
				</details>
			</div>
		`}};n([o.property({type:Boolean})],c.prototype,"open",void 0),n([o.property({type:Boolean})],c.prototype,"hidden",void 0),c=n([o.customElement("tone-drawer")],c),e.ToneDrawerElement=c,e.createDrawer=function({parent:t=document.body,open:e=!1}={}){const r=document.createElement("tone-drawer");return t&&t.appendChild(r),r.open=e,r}},function(t,e,r){"use strict";var n=Object.prototype.toString;t.exports=function(t){var e=n.call(t),r="[object Arguments]"===e;return r||(r="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===n.call(t.callee)),r}},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,o=Object.prototype.toString,i=function(t){return!(n&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===o.call(t)},a=function(t){return!!i(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==o.call(t)&&"[object Function]"===o.call(t.callee)},s=function(){return i(arguments)}();i.isLegacyArguments=a,t.exports=s?i:a},function(t,e,r){"use strict";var n=function(t){return t!=t};t.exports=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!n(t)||!n(e))}},function(t,e,r){"use strict";var n=r(30);t.exports=function(){return"function"==typeof Object.is?Object.is:n}},function(t,e,r){"use strict";var n=Object,o=TypeError;t.exports=function(){if(null!=this&&this!==n(this))throw new o("RegExp.prototype.flags getter called on non-object");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t}},function(t,e,r){"use strict";var n=r(32),o=r(11).supportsDescriptors,i=Object.getOwnPropertyDescriptor,a=TypeError;t.exports=function(){if(!o)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var t=i(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof/a/.dotAll)return t.get}return n}},function(t,e,r){"use strict";var n=String.prototype.valueOf,o=Object.prototype.toString,i="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"string"==typeof t||"object"==typeof t&&(i?function(t){try{return n.call(t),!0}catch(t){return!1}}(t):"[object String]"===o.call(t))}},function(t,e,r){"use strict";var n,o="function"==typeof Map&&Map.prototype?Map:null,i="function"==typeof Set&&Set.prototype?Set:null;o||(n=function(t){return!1});var a=o?Map.prototype.has:null,s=i?Set.prototype.has:null;n||a||(n=function(t){return!1}),t.exports=n||function(t){if(!t||"object"!=typeof t)return!1;try{if(a.call(t),s)try{s.call(t)}catch(t){return!0}return t instanceof o}catch(t){}return!1}},function(t,e,r){"use strict";var n,o="function"==typeof Map&&Map.prototype?Map:null,i="function"==typeof Set&&Set.prototype?Set:null;i||(n=function(t){return!1});var a=o?Map.prototype.has:null,s=i?Set.prototype.has:null;n||s||(n=function(t){return!1}),t.exports=n||function(t){if(!t||"object"!=typeof t)return!1;try{if(s.call(t),a)try{a.call(t)}catch(t){return!0}return t instanceof i}catch(t){}return!1}},function(t,e){var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString;t.exports=function(t,e,o){if("[object Function]"!==n.call(e))throw new TypeError("iterator must be a function");var i=t.length;if(i===+i)for(var a=0;a<i;a++)e.call(o,t[a],a,t);else for(var s in t)r.call(t,s)&&e.call(o,t[s],s,t)}},function(t,e,r){"use strict";(function(e){var n=r(80);t.exports=function(){return n(["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],(function(t){return"function"==typeof e[t]}))}}).call(this,r(19))},function(t,e,r){"use strict";var n=r(13)("%Object.getOwnPropertyDescriptor%");if(n)try{n([],"length")}catch(t){n=null}t.exports=n},function(t,e,r){"use strict";var n=r(23),o=r(25),i=function(t){return null!=t},a=r(26)(),s=Object,c=o.call(Function.call,Array.prototype.push),u=o.call(Function.call,Object.prototype.propertyIsEnumerable),l=a?Object.getOwnPropertySymbols:null;t.exports=function(t,e){if(!i(t))throw new TypeError("target must be an object");var r,o,p,h,f,d,y,m=s(t);for(r=1;r<arguments.length;++r){o=s(arguments[r]),h=n(o);var v=a&&(Object.getOwnPropertySymbols||l);if(v)for(f=v(o),p=0;p<f.length;++p)y=f[p],u(o,y)&&c(h,y);for(p=0;p<h.length;++p)d=o[y=h[p]],u(o,y)&&(m[y]=d)}return m}},function(t,e,r){"use strict";var n=r(40);t.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var o=Object.assign({},r),i="";for(var a in o)i+=a;return t!==i}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}return!1}()?n:Object.assign:n}},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.createMeter=e.ToneMeterElement=void 0;const o=r(9),i=r(0),a=r(88),s=r(22);let c=class extends o.VisBase{constructor(){super(...arguments),this.height=40,this.meterLevels=[]}generate(){}loop(){if(requestAnimationFrame(this.loop.bind(this)),!this.tone)return;const t=this.tone.getValue();this.meterLevels=Array.isArray(t)?t:[t],this.requestUpdate()}bind(t){this.tone=t,this.tone.normalRange=!0,this.loop()}renderColor(t){return a("#aaa").mix(a("rgb(209, 196, 15)"),Math.pow(t,.5)).hex()}render(){return i.html`
			<style>
				#container {
					display: flex;
					align-items: flex-end;
					border: 2px outset #ddd;
					border-color: transparent transparent #ddd;
				}
				.level {
					flex: 1;
					background-color: #aaa;
					margin: 2px;
					min-height: 2px;
					border-top-left-radius: 2px;
					border-top-right-radius: 2px;
				}
			</style>
			<div
				id="container"
				style=${s.styleMap({height:this.height+"px"})}
			>
				${this.meterLevels.map(t=>i.html`
						<div
							class="level"
							style=${s.styleMap({height:(100*Math.pow(t,.2)).toFixed(2)+"%",backgroundColor:this.renderColor(t)})}
						></div>
					`)}
			</div>
		`}};c=n([i.customElement("tone-meter-vis")],c),e.ToneMeterElement=c,e.createMeter=function({tone:t,parent:e,height:r}){const n=document.createElement("tone-meter-vis");return n.bind(t),e&&e.appendChild(n),r&&n.setAttribute("height",r.toString()),n}},function(t,e,r){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(t,e,r){var n=r(43),o={};for(var i in n)n.hasOwnProperty(i)&&(o[n[i]]=i);var a=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in a)if(a.hasOwnProperty(s)){if(!("channels"in a[s]))throw new Error("missing channels property: "+s);if(!("labels"in a[s]))throw new Error("missing channel labels property: "+s);if(a[s].labels.length!==a[s].channels)throw new Error("channel and label counts mismatch: "+s);var c=a[s].channels,u=a[s].labels;delete a[s].channels,delete a[s].labels,Object.defineProperty(a[s],"channels",{value:c}),Object.defineProperty(a[s],"labels",{value:u})}a.rgb.hsl=function(t){var e,r,n=t[0]/255,o=t[1]/255,i=t[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),c=s-a;return s===a?e=0:n===s?e=(o-i)/c:o===s?e=2+(i-n)/c:i===s&&(e=4+(n-o)/c),(e=Math.min(60*e,360))<0&&(e+=360),r=(a+s)/2,[e,100*(s===a?0:r<=.5?c/(s+a):c/(2-s-a)),100*r]},a.rgb.hsv=function(t){var e,r,n,o,i,a=t[0]/255,s=t[1]/255,c=t[2]/255,u=Math.max(a,s,c),l=u-Math.min(a,s,c),p=function(t){return(u-t)/6/l+.5};return 0===l?o=i=0:(i=l/u,e=p(a),r=p(s),n=p(c),a===u?o=n-r:s===u?o=1/3+e-n:c===u&&(o=2/3+r-e),o<0?o+=1:o>1&&(o-=1)),[360*o,100*i,100*u]},a.rgb.hwb=function(t){var e=t[0],r=t[1],n=t[2];return[a.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(r,n))),100*(n=1-1/255*Math.max(e,Math.max(r,n)))]},a.rgb.cmyk=function(t){var e,r=t[0]/255,n=t[1]/255,o=t[2]/255;return[100*((1-r-(e=Math.min(1-r,1-n,1-o)))/(1-e)||0),100*((1-n-e)/(1-e)||0),100*((1-o-e)/(1-e)||0),100*e]},a.rgb.keyword=function(t){var e=o[t];if(e)return e;var r,i,a,s=1/0;for(var c in n)if(n.hasOwnProperty(c)){var u=n[c],l=(i=t,a=u,Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)+Math.pow(i[2]-a[2],2));l<s&&(s=l,r=c)}return r},a.keyword.rgb=function(t){return n[t]},a.rgb.xyz=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*e+.7152*r+.0722*n),100*(.0193*e+.1192*r+.9505*n)]},a.rgb.lab=function(t){var e=a.rgb.xyz(t),r=e[0],n=e[1],o=e[2];return n/=100,o/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(r-n),200*(n-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]},a.hsl.rgb=function(t){var e,r,n,o,i,a=t[0]/360,s=t[1]/100,c=t[2]/100;if(0===s)return[i=255*c,i,i];e=2*c-(r=c<.5?c*(1+s):c+s-c*s),o=[0,0,0];for(var u=0;u<3;u++)(n=a+1/3*-(u-1))<0&&n++,n>1&&n--,i=6*n<1?e+6*(r-e)*n:2*n<1?r:3*n<2?e+(r-e)*(2/3-n)*6:e,o[u]=255*i;return o},a.hsl.hsv=function(t){var e=t[0],r=t[1]/100,n=t[2]/100,o=r,i=Math.max(n,.01);return r*=(n*=2)<=1?n:2-n,o*=i<=1?i:2-i,[e,100*(0===n?2*o/(i+o):2*r/(n+r)),100*((n+r)/2)]},a.hsv.rgb=function(t){var e=t[0]/60,r=t[1]/100,n=t[2]/100,o=Math.floor(e)%6,i=e-Math.floor(e),a=255*n*(1-r),s=255*n*(1-r*i),c=255*n*(1-r*(1-i));switch(n*=255,o){case 0:return[n,c,a];case 1:return[s,n,a];case 2:return[a,n,c];case 3:return[a,s,n];case 4:return[c,a,n];case 5:return[n,a,s]}},a.hsv.hsl=function(t){var e,r,n,o=t[0],i=t[1]/100,a=t[2]/100,s=Math.max(a,.01);return n=(2-i)*a,r=i*s,[o,100*(r=(r/=(e=(2-i)*s)<=1?e:2-e)||0),100*(n/=2)]},a.hwb.rgb=function(t){var e,r,n,o,i,a,s,c=t[0]/360,u=t[1]/100,l=t[2]/100,p=u+l;switch(p>1&&(u/=p,l/=p),n=6*c-(e=Math.floor(6*c)),0!=(1&e)&&(n=1-n),o=u+n*((r=1-l)-u),e){default:case 6:case 0:i=r,a=o,s=u;break;case 1:i=o,a=r,s=u;break;case 2:i=u,a=r,s=o;break;case 3:i=u,a=o,s=r;break;case 4:i=o,a=u,s=r;break;case 5:i=r,a=u,s=o}return[255*i,255*a,255*s]},a.cmyk.rgb=function(t){var e=t[0]/100,r=t[1]/100,n=t[2]/100,o=t[3]/100;return[255*(1-Math.min(1,e*(1-o)+o)),255*(1-Math.min(1,r*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o))]},a.xyz.rgb=function(t){var e,r,n,o=t[0]/100,i=t[1]/100,a=t[2]/100;return r=-.9689*o+1.8758*i+.0415*a,n=.0557*o+-.204*i+1.057*a,e=(e=3.2406*o+-1.5372*i+-.4986*a)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(e=Math.min(Math.max(0,e),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]},a.xyz.lab=function(t){var e=t[0],r=t[1],n=t[2];return r/=100,n/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(e-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},a.lab.xyz=function(t){var e,r,n,o=t[0];e=t[1]/500+(r=(o+16)/116),n=r-t[2]/200;var i=Math.pow(r,3),a=Math.pow(e,3),s=Math.pow(n,3);return r=i>.008856?i:(r-16/116)/7.787,e=a>.008856?a:(e-16/116)/7.787,n=s>.008856?s:(n-16/116)/7.787,[e*=95.047,r*=100,n*=108.883]},a.lab.lch=function(t){var e,r=t[0],n=t[1],o=t[2];return(e=360*Math.atan2(o,n)/2/Math.PI)<0&&(e+=360),[r,Math.sqrt(n*n+o*o),e]},a.lch.lab=function(t){var e,r=t[0],n=t[1];return e=t[2]/360*2*Math.PI,[r,n*Math.cos(e),n*Math.sin(e)]},a.rgb.ansi16=function(t){var e=t[0],r=t[1],n=t[2],o=1 in arguments?arguments[1]:a.rgb.hsv(t)[2];if(0===(o=Math.round(o/50)))return 30;var i=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(e/255));return 2===o&&(i+=60),i},a.hsv.ansi16=function(t){return a.rgb.ansi16(a.hsv.rgb(t),t[2])},a.rgb.ansi256=function(t){var e=t[0],r=t[1],n=t[2];return e===r&&r===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},a.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var r=.5*(1+~~(t>50));return[(1&e)*r*255,(e>>1&1)*r*255,(e>>2&1)*r*255]},a.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var r;return t-=16,[Math.floor(t/36)/5*255,Math.floor((r=t%36)/6)/5*255,r%6/5*255]},a.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},a.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var r=e[0];3===e[0].length&&(r=r.split("").map((function(t){return t+t})).join(""));var n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},a.rgb.hcg=function(t){var e,r=t[0]/255,n=t[1]/255,o=t[2]/255,i=Math.max(Math.max(r,n),o),a=Math.min(Math.min(r,n),o),s=i-a;return e=s<=0?0:i===r?(n-o)/s%6:i===n?2+(o-r)/s:4+(r-n)/s+4,e/=6,[360*(e%=1),100*s,100*(s<1?a/(1-s):0)]},a.hsl.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1,o=0;return(n=r<.5?2*e*r:2*e*(1-r))<1&&(o=(r-.5*n)/(1-n)),[t[0],100*n,100*o]},a.hsv.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=e*r,o=0;return n<1&&(o=(r-n)/(1-n)),[t[0],100*n,100*o]},a.hcg.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100;if(0===r)return[255*n,255*n,255*n];var o,i=[0,0,0],a=e%1*6,s=a%1,c=1-s;switch(Math.floor(a)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=c,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=c,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=c}return o=(1-r)*n,[255*(r*i[0]+o),255*(r*i[1]+o),255*(r*i[2]+o)]},a.hcg.hsv=function(t){var e=t[1]/100,r=e+t[2]/100*(1-e),n=0;return r>0&&(n=e/r),[t[0],100*n,100*r]},a.hcg.hsl=function(t){var e=t[1]/100,r=t[2]/100*(1-e)+.5*e,n=0;return r>0&&r<.5?n=e/(2*r):r>=.5&&r<1&&(n=e/(2*(1-r))),[t[0],100*n,100*r]},a.hcg.hwb=function(t){var e=t[1]/100,r=e+t[2]/100*(1-e);return[t[0],100*(r-e),100*(1-r)]},a.hwb.hcg=function(t){var e=t[1]/100,r=1-t[2]/100,n=r-e,o=0;return n<1&&(o=(r-n)/(1-n)),[t[0],100*n,100*o]},a.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},a.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},a.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},a.gray.hsl=a.gray.hsv=function(t){return[0,0,t[0]]},a.gray.hwb=function(t){return[0,100,t[0]]},a.gray.cmyk=function(t){return[0,0,0,t[0]]},a.gray.lab=function(t){return[t[0],0,0]},a.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(r.length)+r},a.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.createWaveform=void 0;const o=r(9),i=r(0);let a=class extends o.VisBase{constructor(){super(...arguments),this.height=40}generate(){}loop(){if(requestAnimationFrame(this.loop.bind(this)),!this.tone)return;const t=this.tone.getValue();this.draw(t)}bind(t){this.tone=t,this.loop()}};a=n([i.customElement("tone-waveform-vis")],a),e.createWaveform=function({tone:t,parent:e,height:r}){const n=document.createElement("tone-waveform-vis");return n.bind(t),e&&e.appendChild(n),r&&n.setAttribute("height",r.toString()),n}},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.createPiano=e.TonePiano=void 0;const o=r(0);r(101),r(112);let i=class extends o.LitElement{constructor(){super(...arguments),this.polyphonic=!1}firstUpdated(t){super.firstUpdated(t);this.shadowRoot.querySelector("tone-keyboard");window.addEventListener("resize",this._resize.bind(this)),setTimeout(()=>this._resize(),100)}_clamp(t,e,r){return Math.max(Math.min(t,r),e)}_scale(t,e,r,n,o){return(t-e)/(r-e)*(o-n)+n}_resize(){const t=this.shadowRoot.querySelector("#container").clientWidth,e=this._clamp(Math.floor(t/100)-1,1,8),r=Math.ceil(this._scale(e,1,8,5,1));this.shadowRoot.querySelector("tone-keyboard").rootoctave=r,this.shadowRoot.querySelector("tone-keyboard").octaves=e}render(){return o.html`
			<style>
				:host {
					display: block;
				}

				#container {
					background-color: var(--color-light-gray);
					position: relative;
					padding: 5px;
					display: block;
				}

				tone-keyboard {
					display: block;
					clear: both;
				}

				tone-midi-in {
					position: relative;
					top: 5px;
					right: 5px;
					display: inline-block;
					float: right;
				}
			</style>
			<div id="container">
				<tone-midi-in> </tone-midi-in>
				<tone-keyboard ?polyphonic=${this.polyphonic}></tone-keyboard>
			</div>
		`}};n([o.property({type:Boolean})],i.prototype,"polyphonic",void 0),i=n([o.customElement("tone-piano")],i),e.TonePiano=i,e.createPiano=function({parent:t,polyphonic:e=!0,noteon:r=(()=>{}),noteoff:n=(()=>{})}){const o=document.createElement("tone-piano");return o.polyphonic=e,o.addEventListener("noteon",t=>r(t.detail)),o.addEventListener("noteoff",t=>n(t.detail)),t&&t.appendChild(o),o}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.piano=e.meter=e.fft=e.waveform=e.folder=e.drawer=e.ui=void 0,r(15),r(27),r(20),r(46),r(21);const n=r(15),o=r(27),i=r(20),a=r(45),s=r(114),c=r(42),u=r(46);var l=r(27);Object.defineProperty(e,"ToneDrawerElement",{enumerable:!0,get:function(){return l.ToneDrawerElement}});var p=r(20);Object.defineProperty(e,"ToneFolderElement",{enumerable:!0,get:function(){return p.ToneFolderElement}});var h=r(15);Object.defineProperty(e,"ToneAudioNodeElement",{enumerable:!0,get:function(){return h.ToneAudioNodeElement}}),e.ui=n.createElement,e.drawer=o.createDrawer,e.folder=i.createFolder,e.waveform=a.createWaveform,e.fft=s.createFFT,e.meter=c.createMeter,e.piano=u.createPiano},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.ToneNumberValue=void 0;const o=r(0),i=r(17);let a=class extends i.ToneValue{constructor(){super(...arguments),this.value=0,this.alt=!1,this.shift=!1,this.dragging=!1}firstUpdated(t){super.firstUpdated(t),window.addEventListener("mousemove",t=>{if(this.dragging){t.preventDefault();const e=this.shadowRoot.host.getBoundingClientRect(),r=e.top+(e.bottom-e.top)/2-t.clientY,n=this.shift?this.alt?.01:10:this.alt?.1:1;this.value=this.dragstartValue+Math.floor(r/10)*n,this.dispatchValue(this.value)}}),window.addEventListener("keydown",t=>{18===t.keyCode&&(this.alt=!0),this.shift=t.shiftKey}),window.addEventListener("keyup",t=>{18===t.keyCode&&(this.alt=!1),this.shift=t.shiftKey})}_oninput(t){t.preventDefault(),t.stopPropagation();const e=parseFloat(this.shadowRoot.querySelector("input").value);isFinite(e)&&(this.value=e,this.dispatchValue(e))}_onkeypress(t){let e=!1;"ArrowUp"===t.key?(e=!0,this.shift?this.value+=this.alt?.01:10:this.value+=this.alt?.1:1):"ArrowDown"===t.key&&(e=!0,this.shift?this.value-=this.alt?.01:10:this.value-=this.alt?.1:1),e&&(t.preventDefault(),this.dispatchValue(this.value))}reset(){this.shadowRoot.querySelector("input").value=this.beautifyValue(this.value).toString()}_dragstart(t){this.dragging=!0,this.dragstartValue=this.value,window.addEventListener("mouseup",()=>{this.dragstartValue!==this.value&&this.dispatchValue(this.value),this.dragging=!1},{once:!0})}beautifyValue(t){const e=t.toString().split(".")[1];return parseFloat(t.toFixed(Math.min(e&&e.length,4)))}render(){return o.html`
			<div id="container">
				<label for="number">${this.name}</label>
				<input
					@mousedown=${this._dragstart.bind(this)}
					@keydown=${this._onkeypress.bind(this)}
					@change=${this._oninput.bind(this)}
					name="number"
					type="text"
					.value="${this.beautifyValue(this.value)}"
				/>
			</div>
		`}};n([o.property({type:String})],a.prototype,"name",void 0),n([o.property({type:Number})],a.prototype,"value",void 0),a=n([o.customElement("tone-number")],a),e.ToneNumberValue=a},function(t,e,r){var n=r(50);t.exports="string"==typeof n?n:n.toString()},function(t,e,r){(e=r(18)(!1)).push([t.i,'#container{width:100%;font-size:14px;font-family:"Open Sans",sans-serif;background-color:transparent}#container label{padding-left:6px}#container.error input{transition-duration:0s;color:gray}#container input{transition:color 0.2s;font-family:inherit;font-size:inherit;-webkit-appearance:none;appearance:none;border:0px;text-align:right;float:right;background-color:transparent;outline:0px solid #fcd5b1}#container input:focus{outline-width:3px}#container.array{display:flex}#container.array label,#container.array #bars{flex:1}#container.array label[disabled]{color:lightgray}#container.array #bars{display:flex;flex-direction:row}#container.array #bars .bar{flex:1;height:100%;position:relative;margin:0px 1px}#container.array #bars .bar .fill{pointer-events:none;background-color:black;position:absolute;bottom:0px;left:0px;width:100%;height:0px}#container.boolean input{margin:0px;box-sizing:border-box;border:2px solid #ddd;background-color:#ddd;width:16px;height:16px}#container.boolean input[checked]{background-color:black}\n',""]),t.exports=e},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.ToneStringValue=void 0;const o=r(0),i=r(17);let a=class extends i.ToneValue{constructor(){super(...arguments),this.value=""}_oninput(t){t.stopPropagation(),t.stopImmediatePropagation(),this.value=this.inputEl.value,this.dispatchValue(this.value)}reset(){this.inputEl.value=this.value}render(){return o.html`
			<div id="container">
				<label for="string">${this.name}</label>
				<input
					@input=${t=>t.stopPropagation()}
					@change=${this._oninput.bind(this)}
					name="string"
					type="text"
					.value=${this.value}
				/>
			</div>
		`}};n([o.property({type:String})],a.prototype,"name",void 0),n([o.property({type:String})],a.prototype,"value",void 0),n([o.query("input")],a.prototype,"inputEl",void 0),a=n([o.customElement("tone-string")],a),e.ToneStringValue=a},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.ToneArrayValue=void 0;const o=r(0),i=r(17),a=r(22);let s=class extends i.ToneValue{constructor(){super(...arguments),this.value=[]}reset(){}scale(t,e,r,n,o){return Math.pow((t-e)/(r-e),.25)*(o-n)+n}_mousemove(t,e){if(e.buttons){let r=e.offsetY/e.target.clientHeight;r=Math.min(Math.max(r,0),1),this.value[t]=Math.pow(1-r,4),this.dispatchValue(this.value),this.requestUpdate()}}render(){const t=this.value.map(Math.abs),e=Math.min(...t,0),r=Math.max(...t,1);return o.html`
			<div id="container" class="array">
				<label ?disabled=${0===t.length}>${this.name}</label>
				<span id="bars">
					${t.map((t,n)=>o.html`
							<span
								class="bar"
								@mousedown=${t=>this._mousemove(n,t)}
								@mousemove=${t=>this._mousemove(n,t)}
							>
								<span
									style=${a.styleMap({height:this.scale(t,e,r,0,100)+"%"})}
									class="fill"
								></span>
							</span>
						`)}
				</span>
			</div>
		`}};n([o.property({type:String})],s.prototype,"name",void 0),n([o.property({type:Array})],s.prototype,"value",void 0),s=n([o.customElement("tone-array")],s),e.ToneArrayValue=s},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.ToneBooleanValue=void 0;const o=r(0),i=r(17);let a=class extends i.ToneValue{constructor(){super(...arguments),this.value=!1}_oninput(t){t.stopPropagation(),this.value=this.inputEl.checked,this.dispatchValue(this.value)}reset(){this.inputEl.checked=this.value}render(){return o.html`
			<div id="container" class="boolean">
				<label for="check">${this.name}</label>
				<input
					@input=${this._oninput.bind(this)}
					name="check"
					type="checkbox"
					?checked=${this.value}
				/>
			</div>
		`}};n([o.query("input")],a.prototype,"inputEl",void 0),n([o.property({type:String})],a.prototype,"name",void 0),n([o.property({type:Boolean})],a.prototype,"value",void 0),a=n([o.customElement("tone-boolean")],a),e.ToneBooleanValue=a},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.ToneVisualizer=void 0;const i=r(0),a=r(55);r(84),r(85),r(86),r(87),r(42),r(45),r(94);let s=class extends i.LitElement{constructor(){super(...arguments),this.firstRendered=!1}bind(t){return o(this,void 0,void 0,(function*(){this.tone=t,this.path.forEach(e=>{this.tone=t[e]}),this.tone&&(yield this.requestUpdate(),this.shadowRoot.querySelectorAll(".vis").forEach(t=>{t.bind(this.tone)}),this.firstRendered=!0)}))}shouldUpdate(){return!this.tone||!this.firstRendered||a(this.values,this.tone.get())}chooseVis(){return this.tone.toString().includes("Envelope")?i.html`
				<tone-envelope-vis
					class="vis"
					values=${JSON.stringify(this.values)}
				></tone-envelope-vis>
			`:this.tone.toString().includes("Oscillator")?i.html`
				<tone-oscillator-vis
					class="vis"
					values=${JSON.stringify(this.values)}
				></tone-oscillator-vis>
			`:"Compressor"===this.tone.toString()?i.html`
				<tone-compressor-vis
					class="vis"
					values=${JSON.stringify(this.values)}
				></tone-compressor-vis>
			`:"Filter"===this.tone.toString()||"OnePoleFilter"===this.tone.toString()?i.html`
				<tone-filter-vis
					class="vis"
					values=${JSON.stringify(this.values)}
				></tone-filter-vis>
			`:"Meter"===this.tone.toString()?i.html`
				<tone-meter-vis
					class="vis"
					values=${JSON.stringify(this.values)}
				></tone-meter-vis>
			`:"Waveform"===this.tone.toString()?i.html`
				<tone-waveform-vis
					class="vis"
					values=${JSON.stringify(this.values)}
				></tone-waveform-vis>
			`:"FFT"===this.tone.toString()?i.html`
				<tone-fft-vis
					class="vis"
					values=${JSON.stringify(this.values)}
				></tone-fft-vis>
			`:Reflect.has(this.tone,"buffer")?i.html`
				<tone-buffer-vis
					class="vis"
					values=${JSON.stringify(this.values)}
				></tone-buffer-vis>
			`:void 0}render(){if(this.tone)return i.html`
				<div id="container">
					${this.chooseVis()}
				</div>
			`}};n([i.property({type:Array})],s.prototype,"path",void 0),n([i.property({type:Object})],s.prototype,"values",void 0),s=n([i.customElement("tone-visualizer")],s),e.ToneVisualizer=s},function(t,e,r){"use strict";var n=r(23),o=r(29),i=r(57),a=r(60),s=r(61),c=r(63),u=r(64),l=r(65),p=r(13),h=r(16),f=r(70),d=r(73),y=r(76),m=r(79),v=r(82),g=h("Date.prototype.getTime"),b=Object.getPrototypeOf,_=h("Object.prototype.toString"),S=p("%Set%",!0),w=h("Map.prototype.has",!0),E=h("Map.prototype.get",!0),M=h("Map.prototype.size",!0),x=h("Set.prototype.add",!0),O=h("Set.prototype.delete",!0),A=h("Set.prototype.has",!0),P=h("Set.prototype.size",!0);function I(t,e,r,n){for(var o,i=d(t);(o=i.next())&&!o.done;)if(R(e,o.value,r,n))return O(t,o.value),!0;return!1}function k(t){return void 0===t?null:"object"!=typeof t?"symbol"!=typeof t&&("string"!=typeof t&&"number"!=typeof t||+t==+t):void 0}function j(t,e,r,n,o,i){var a=k(r);if(null!=a)return a;var s=E(e,a),c=v({},o,{strict:!1});return!(void 0===s&&!w(e,a)||!R(n,s,c,i))&&(!w(t,a)&&R(n,s,c,i))}function T(t,e,r){var n=k(r);return null!=n?n:A(e,n)&&!A(t,n)}function N(t,e,r,n,o,i){for(var a,s,c=d(t);(a=c.next())&&!a.done;)if(R(r,s=a.value,o,i)&&R(n,E(e,s),o,i))return O(t,s),!0;return!1}function R(t,e,r,p){var h=r||{};if(h.strict?i(t,e):t===e)return!0;if(l(t)!==l(e))return!1;if(!t||!e||"object"!=typeof t&&"object"!=typeof e)return h.strict?i(t,e):t==e;var y,O=p.has(t),k=p.has(e);if(O&&k){if(p.get(t)===p.get(e))return!0}else y={};return O||p.set(t,y),k||p.set(e,y),function(t,e,r,i){var l,p;if(typeof t!=typeof e)return!1;if(null==t||null==e)return!1;if(_(t)!==_(e))return!1;if(o(t)!==o(e))return!1;var h=c(t),y=c(e);if(h!==y)return!1;var O=t instanceof Error,k=e instanceof Error;if(O!==k)return!1;if((O||k)&&(t.name!==e.name||t.message!==e.message))return!1;var D=a(t),$=a(e);if(D!==$)return!1;if((D||$)&&(t.source!==e.source||s(t)!==s(e)))return!1;var F=u(t),V=u(e);if(F!==V)return!1;if((F||V)&&g(t)!==g(e))return!1;if(r.strict&&b&&b(t)!==b(e))return!1;if(m(t)!==m(e))return!1;var L=C(t),B=C(e);if(L!==B)return!1;if(L||B){if(t.length!==e.length)return!1;for(l=0;l<t.length;l++)if(t[l]!==e[l])return!1;return!0}if(typeof t!=typeof e)return!1;var U=n(t),G=n(e);if(U.length!==G.length)return!1;for(U.sort(),G.sort(),l=U.length-1;l>=0;l--)if(U[l]!=G[l])return!1;for(l=U.length-1;l>=0;l--)if(p=U[l],!R(t[p],e[p],r,i))return!1;var H=f(t),q=f(e);if(H!==q)return!1;if("Set"===H||"Set"===q)return function(t,e,r,n){if(P(t)!==P(e))return!1;var o,i,a,s=d(t),c=d(e);for(;(o=s.next())&&!o.done;)if(o.value&&"object"==typeof o.value)a||(a=new S),x(a,o.value);else if(!A(e,o.value)){if(r.strict)return!1;if(!T(t,e,o.value))return!1;a||(a=new S),x(a,o.value)}if(a){for(;(i=c.next())&&!i.done;)if(i.value&&"object"==typeof i.value){if(!I(a,i.value,r.strict,n))return!1}else if(!r.strict&&!A(t,i.value)&&!I(a,i.value,r.strict,n))return!1;return 0===P(a)}return!0}(t,e,r,i);if("Map"===H)return function(t,e,r,n){if(M(t)!==M(e))return!1;var o,i,a,s,c,u,l=d(t),p=d(e);for(;(o=l.next())&&!o.done;)if(s=o.value[0],c=o.value[1],s&&"object"==typeof s)a||(a=new S),x(a,s);else if(void 0===(u=E(e,s))&&!w(e,s)||!R(c,u,r,n)){if(r.strict)return!1;if(!j(t,e,s,c,r,n))return!1;a||(a=new S),x(a,s)}if(a){for(;(i=p.next())&&!i.done;)if(s=i.value[0],u=i.value[1],s&&"object"==typeof s){if(!N(a,t,s,u,r,n))return!1}else if(!(r.strict||t.has(s)&&R(E(t,s),u,r,n)||N(a,t,s,u,v({},r,{strict:!1}),n)))return!1;return 0===P(a)}return!0}(t,e,r,i);return!0}(t,e,h,p)}function C(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&(!(t.length>0&&"number"!=typeof t[0])&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))))}t.exports=function(t,e,r){return R(t,e,r,y())}},function(t,e,r){"use strict";var n;if(!Object.keys){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=r(28),s=Object.prototype.propertyIsEnumerable,c=!s.call({toString:null},"toString"),u=s.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(t){var e=t.constructor;return e&&e.prototype===t},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!h["$"+t]&&o.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{p(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();n=function(t){var e=null!==t&&"object"==typeof t,r="[object Function]"===i.call(t),n=a(t),s=e&&"[object String]"===i.call(t),h=[];if(!e&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var d=u&&r;if(s&&t.length>0&&!o.call(t,0))for(var y=0;y<t.length;++y)h.push(String(y));if(n&&t.length>0)for(var m=0;m<t.length;++m)h.push(String(m));else for(var v in t)d&&"prototype"===v||!o.call(t,v)||h.push(String(v));if(c)for(var g=function(t){if("undefined"==typeof window||!f)return p(t);try{return p(t)}catch(t){return!1}}(t),b=0;b<l.length;++b)g&&"constructor"===l[b]||!o.call(t,l[b])||h.push(l[b]);return h}}t.exports=n},function(t,e,r){"use strict";var n=r(11),o=r(24),i=r(30),a=r(31),s=r(59),c=o(a(),Object);n(c,{getPolyfill:a,implementation:i,shim:s}),t.exports=c},function(t,e,r){"use strict";var n="Function.prototype.bind called on incompatible ",o=Array.prototype.slice,i=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==i.call(e))throw new TypeError(n+e);for(var r,a=o.call(arguments,1),s=function(){if(this instanceof r){var n=e.apply(this,a.concat(o.call(arguments)));return Object(n)===n?n:this}return e.apply(t,a.concat(o.call(arguments)))},c=Math.max(0,e.length-a.length),u=[],l=0;l<c;l++)u.push("$"+l);if(r=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(s),e.prototype){var p=function(){};p.prototype=e.prototype,r.prototype=new p,p.prototype=null}return r}},function(t,e,r){"use strict";var n=r(31),o=r(11);t.exports=function(){var t=n();return o(Object,{is:t},{is:function(){return Object.is!==t}}),t}},function(t,e,r){"use strict";var n,o,i,a=r(14)()&&"symbol"==typeof Symbol.toStringTag;if(a){n=Function.call.bind(RegExp.prototype.exec),o={};var s=function(){throw o};i={toString:s,valueOf:s},"symbol"==typeof Symbol.toPrimitive&&(i[Symbol.toPrimitive]=s)}var c=Object.prototype.toString;t.exports=a?function(t){if(!t||"object"!=typeof t)return!1;try{n(t,i)}catch(t){return t===o}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===c.call(t)}},function(t,e,r){"use strict";var n=r(11),o=r(24),i=r(32),a=r(33),s=r(62),c=o(i);n(c,{getPolyfill:a,implementation:i,shim:s}),t.exports=c},function(t,e,r){"use strict";var n=r(11).supportsDescriptors,o=r(33),i=Object.getOwnPropertyDescriptor,a=Object.defineProperty,s=TypeError,c=Object.getPrototypeOf,u=/a/;t.exports=function(){if(!n||!c)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=o(),e=c(u),r=i(e,"flags");return r&&r.get===t||a(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){"use strict";var n=Date.prototype.getDay,o=Object.prototype.toString,i="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&null!==t&&(i?function(t){try{return n.call(t),!0}catch(t){return!1}}(t):"[object Date]"===o.call(t))}},function(t,e,r){"use strict";var n=r(34),o=r(66),i=r(67),a=r(68),s=r(69);t.exports=function(t){return null==t||"object"!=typeof t&&"function"!=typeof t?null:n(t)?"String":o(t)?"Number":i(t)?"Boolean":a(t)?"Symbol":s(t)?"BigInt":void 0}},function(t,e,r){"use strict";var n=Number.prototype.toString,o=Object.prototype.toString,i="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"number"==typeof t||"object"==typeof t&&(i?function(t){try{return n.call(t),!0}catch(t){return!1}}(t):"[object Number]"===o.call(t))}},function(t,e,r){"use strict";var n=Boolean.prototype.toString,o=Object.prototype.toString,i="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"boolean"==typeof t||null!==t&&"object"==typeof t&&(i&&Symbol.toStringTag in t?function(t){try{return n.call(t),!0}catch(t){return!1}}(t):"[object Boolean]"===o.call(t))}},function(t,e,r){"use strict";var n=Object.prototype.toString;if(r(14)()){var o=Symbol.prototype.toString,i=/^Symbol\(.*\)$/;t.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==n.call(t))return!1;try{return function(t){return"symbol"==typeof t.valueOf()&&i.test(o.call(t))}(t)}catch(t){return!1}}}else t.exports=function(t){return!1}},function(t,e,r){"use strict";if("function"==typeof BigInt){var n=BigInt.prototype.valueOf;t.exports=function(t){return null!=t&&"boolean"!=typeof t&&"string"!=typeof t&&"number"!=typeof t&&"symbol"!=typeof t&&"function"!=typeof t&&("bigint"==typeof t||function(t){try{return n.call(t),!0}catch(t){}return!1}(t))}}else t.exports=function(t){return!1}},function(t,e,r){"use strict";var n=r(35),o=r(36),i=r(71),a=r(72);t.exports=function(t){if(t&&"object"==typeof t){if(n(t))return"Map";if(o(t))return"Set";if(i(t))return"WeakMap";if(a(t))return"WeakSet"}return!1}},function(t,e,r){"use strict";var n,o="function"==typeof WeakMap&&WeakMap.prototype?WeakMap:null,i="function"==typeof WeakSet&&WeakSet.prototype?WeakSet:null;o||(n=function(t){return!1});var a=o?o.prototype.has:null,s=i?i.prototype.has:null;n||a||(n=function(t){return!1}),t.exports=n||function(t){if(!t||"object"!=typeof t)return!1;try{if(a.call(t,a),s)try{s.call(t,s)}catch(t){return!0}return t instanceof o}catch(t){}return!1}},function(t,e,r){"use strict";var n,o="function"==typeof WeakMap&&WeakMap.prototype?WeakMap:null,i="function"==typeof WeakSet&&WeakSet.prototype?WeakSet:null;o||(n=function(t){return!1});var a=o?o.prototype.has:null,s=i?i.prototype.has:null;n||s||(t.exports=function(t){return!1}),t.exports=n||function(t){if(!t||"object"!=typeof t)return!1;try{if(s.call(t,s),a)try{a.call(t,a)}catch(t){return!0}return t instanceof i}catch(t){}return!1}},function(t,e,r){"use strict";(function(e){var n=r(29);if(r(14)()||r(26)()){var o=Symbol.iterator;t.exports=function(t){return null!=t&&void 0!==t[o]?t[o]():n(t)?Array.prototype[o].call(t):void 0}}else{var i=r(75),a=r(34),s=r(13),c=s("%Map%",!0),u=s("%Set%",!0),l=r(16),p=l("Array.prototype.push"),h=l("String.prototype.charCodeAt"),f=l("String.prototype.slice"),d=function(t){var e=0;return{next:function(){var r,n=e>=t.length;return n||(r=t[e],e+=1),{done:n,value:r}}}},y=function(t){if(i(t)||n(t))return d(t);if(a(t)){var e=0;return{next:function(){var r=function(t,e){if(e+1>=t.length)return e+1;var r=h(t,e);if(r<55296||r>56319)return e+1;var n=h(t,e+1);return n<56320||n>57343?e+1:e+2}(t,e),n=f(t,e,r);return e=r,{done:r>t.length,value:n}}}}};if(c||u){var m=r(35),v=r(36),g=l("Map.prototype.forEach",!0),b=l("Set.prototype.forEach",!0);if(void 0===e||!e.versions||!e.versions.node)var _=l("Map.prototype.iterator",!0),S=l("Set.prototype.iterator",!0),w=function(t){var e=!1;return{next:function(){try{return{done:e,value:e?void 0:t.next()}}catch(t){return e=!0,{done:!0,value:void 0}}}}};var E=l("Map.prototype.@@iterator",!0)||l("Map.prototype._es6-shim iterator_",!0),M=l("Set.prototype.@@iterator",!0)||l("Set.prototype._es6-shim iterator_",!0);t.exports=function(t){return function(t){if(m(t)){if(_)return w(_(t));if(E)return E(t);if(g){var e=[];return g(t,(function(t,r){p(e,[r,t])})),d(e)}}if(v(t)){if(S)return w(S(t));if(M)return M(t);if(b){var r=[];return b(t,(function(t){p(r,t)})),d(r)}}}(t)||y(t)}}else t.exports=y}}).call(this,r(74))},function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var c,u=[],l=!1,p=-1;function h(){l&&c&&(l=!1,c.length?u=c.concat(u):p=-1,u.length&&f())}function f(){if(!l){var t=s(h);l=!0;for(var e=u.length;e;){for(c=u,u=[];++p<e;)c&&c[p].run();p=-1,e=u.length}c=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new d(t,e)),1!==u.length||l||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){"use strict";var n=r(13),o=r(16),i=r(77),a=n("%TypeError%"),s=n("%WeakMap%",!0),c=n("%Map%",!0),u=o("Array.prototype.push"),l=o("WeakMap.prototype.get",!0),p=o("WeakMap.prototype.set",!0),h=o("WeakMap.prototype.has",!0),f=o("Map.prototype.get",!0),d=o("Map.prototype.set",!0),y=o("Map.prototype.has",!0);t.exports=function(){var t,e,r,n={assert:function(t){if(!n.has(t))throw new a("Side channel does not contain "+i(t))},get:function(n){if(s&&n&&("object"==typeof n||"function"==typeof n)){if(t)return l(t,n)}else if(c){if(e)return f(e,n)}else if(r)return function(t,e){for(var r=0;r<t.length;r+=1)if(t[r].key===e)return t[r].value}(r,n)},has:function(n){if(s&&n&&("object"==typeof n||"function"==typeof n)){if(t)return h(t,n)}else if(c){if(e)return y(e,n)}else if(r)return function(t,e){for(var r=0;r<t.length;r+=1)if(t[r].key===e)return!0;return!1}(r,n);return!1},set:function(n,o){s&&n&&("object"==typeof n||"function"==typeof n)?(t||(t=new s),p(t,n,o)):c?(e||(e=new c),d(e,n,o)):(r||(r=[]),function(t,e,r){for(var n=0;n<t.length;n+=1)if(t[n].key===e)return void(t[n].value=r);u(t,{key:e,value:r})}(r,n,o))}};return n}},function(t,e,r){var n="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=n&&o&&"function"==typeof o.get?o.get:null,a=n&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=s&&c&&"function"==typeof c.get?c.get:null,l=s&&Set.prototype.forEach,p="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,h="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,f=Boolean.prototype.valueOf,d=Object.prototype.toString,y=Function.prototype.toString,m=String.prototype.match,v="function"==typeof BigInt?BigInt.prototype.valueOf:null,g=r(78).custom,b=g&&E(g)?g:null;function _(t,e,r){var n="double"===(r.quoteStyle||e)?'"':"'";return n+t+n}function S(t){return String(t).replace(/"/g,"&quot;")}function w(t){return"[object Array]"===O(t)}function E(t){return"[object Symbol]"===O(t)}t.exports=function t(e,r,n,o){var s=r||{};if(x(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(x(s,"maxStringLength")&&("number"==typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var c=!x(s,"customInspect")||s.customInspect;if("boolean"!=typeof c)throw new TypeError('option "customInspect", if provided, must be `true` or `false`');if(x(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return function t(e,r){if(e.length>r.maxStringLength){var n=e.length-r.maxStringLength,o="... "+n+" more character"+(n>1?"s":"");return t(e.slice(0,r.maxStringLength),r)+o}return _(e.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,P),"single",r)}(e,s);if("number"==typeof e)return 0===e?1/0/e>0?"0":"-0":String(e);if("bigint"==typeof e)return String(e)+"n";var d=void 0===s.depth?5:s.depth;if(void 0===n&&(n=0),n>=d&&d>0&&"object"==typeof e)return w(e)?"[Array]":"[Object]";var g=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;r=Array(t.indent+1).join(" ")}return{base:r,prev:Array(e+1).join(r)}}(s,n);if(void 0===o)o=[];else if(A(o,e)>=0)return"[Circular]";function M(e,r,i){if(r&&(o=o.slice()).push(r),i){var a={depth:s.depth};return x(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),t(e,a,n+1,o)}return t(e,s,n+1,o)}if("function"==typeof e){var R=function(t){if(t.name)return t.name;var e=m.call(y.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e);return"[Function"+(R?": "+R:" (anonymous)")+"]"}if(E(e)){var C=Symbol.prototype.toString.call(e);return"object"==typeof e?I(C):C}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var D="<"+String(e.nodeName).toLowerCase(),$=e.attributes||[],F=0;F<$.length;F++)D+=" "+$[F].name+"="+_(S($[F].value),"double",s);return D+=">",e.childNodes&&e.childNodes.length&&(D+="..."),D+="</"+String(e.nodeName).toLowerCase()+">"}if(w(e)){if(0===e.length)return"[]";var V=N(e,M);return g&&!function(t){for(var e=0;e<t.length;e++)if(A(t[e],"\n")>=0)return!1;return!0}(V)?"["+T(V,g)+"]":"[ "+V.join(", ")+" ]"}if(function(t){return"[object Error]"===O(t)}(e)){var L=N(e,M);return 0===L.length?"["+String(e)+"]":"{ ["+String(e)+"] "+L.join(", ")+" }"}if("object"==typeof e&&c){if(b&&"function"==typeof e[b])return e[b]();if("function"==typeof e.inspect)return e.inspect()}if(function(t){if(!i||!t||"object"!=typeof t)return!1;try{i.call(t);try{u.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var B=[];return a.call(e,(function(t,r){B.push(M(r,e,!0)+" => "+M(t,e))})),j("Map",i.call(e),B,g)}if(function(t){if(!u||!t||"object"!=typeof t)return!1;try{u.call(t);try{i.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var U=[];return l.call(e,(function(t){U.push(M(t,e))})),j("Set",u.call(e),U,g)}if(function(t){if(!p||!t||"object"!=typeof t)return!1;try{p.call(t,p);try{h.call(t,h)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return k("WeakMap");if(function(t){if(!h||!t||"object"!=typeof t)return!1;try{h.call(t,h);try{p.call(t,p)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return k("WeakSet");if(function(t){return"[object Number]"===O(t)}(e))return I(M(Number(e)));if(function(t){return"[object BigInt]"===O(t)}(e))return I(M(v.call(e)));if(function(t){return"[object Boolean]"===O(t)}(e))return I(f.call(e));if(function(t){return"[object String]"===O(t)}(e))return I(M(String(e)));if(!function(t){return"[object Date]"===O(t)}(e)&&!function(t){return"[object RegExp]"===O(t)}(e)){var G=N(e,M);return 0===G.length?"{}":g?"{"+T(G,g)+"}":"{ "+G.join(", ")+" }"}return String(e)};var M=Object.prototype.hasOwnProperty||function(t){return t in this};function x(t,e){return M.call(t,e)}function O(t){return d.call(t)}function A(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function P(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+e.toString(16)}function I(t){return"Object("+t+")"}function k(t){return t+" { ? }"}function j(t,e,r,n){return t+" ("+e+") {"+(n?T(r,n):r.join(", "))+"}"}function T(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+t.join(","+r)+"\n"+e.prev}function N(t,e){var r=w(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=x(t,o)?e(t[o],t):""}for(var i in t)x(t,i)&&(r&&String(Number(i))===i&&i<t.length||(/[^\w$]/.test(i)?n.push(e(i,t)+": "+e(t[i],t)):n.push(i+": "+e(t[i],t))));return n}},function(t,e){},function(t,e,r){"use strict";(function(e){var n=r(37),o=r(38),i=r(16),a=i("Object.prototype.toString"),s=r(14)()&&"symbol"==typeof Symbol.toStringTag,c=o(),u=i("String.prototype.slice"),l={},p=r(39),h=Object.getPrototypeOf;s&&p&&h&&n(c,(function(t){if("function"==typeof e[t]){var r=new e[t];if(!(Symbol.toStringTag in r))throw new EvalError("this engine has support for Symbol.toStringTag, but "+t+" does not have the property! Please report this.");var n=h(r),o=p(n,Symbol.toStringTag);if(!o){var i=h(n);o=p(i,Symbol.toStringTag)}l[t]=o.get}}));var f=r(81);t.exports=function(t){return!!f(t)&&(s?function(t){var e=!1;return n(l,(function(r,n){if(!e)try{var o=r.call(t);o===n&&(e=o)}catch(t){}})),e}(t):u(a(t),8,-1))}}).call(this,r(19))},function(t,e){t.exports=function(t,e,n){if(t.filter)return t.filter(e,n);if(null==t)throw new TypeError;if("function"!=typeof e)throw new TypeError;for(var o=[],i=0;i<t.length;i++)if(r.call(t,i)){var a=t[i];e.call(n,a,i,t)&&o.push(a)}return o};var r=Object.prototype.hasOwnProperty},function(t,e,r){"use strict";(function(e){var n=r(37),o=r(38),i=r(16),a=i("Object.prototype.toString"),s=r(14)()&&"symbol"==typeof Symbol.toStringTag,c=o(),u=i("Array.prototype.indexOf",!0)||function(t,e){for(var r=0;r<t.length;r+=1)if(t[r]===e)return r;return-1},l=i("String.prototype.slice"),p={},h=r(39),f=Object.getPrototypeOf;s&&h&&f&&n(c,(function(t){var r=new e[t];if(!(Symbol.toStringTag in r))throw new EvalError("this engine has support for Symbol.toStringTag, but "+t+" does not have the property! Please report this.");var n=f(r),o=h(n,Symbol.toStringTag);if(!o){var i=f(n);o=h(i,Symbol.toStringTag)}p[t]=o.get}));t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!s){var e=l(a(t),8,-1);return u(c,e)>-1}return!!h&&function(t){var e=!1;return n(p,(function(r,n){if(!e)try{e=r.call(t)===n}catch(t){}})),e}(t)}}).call(this,r(19))},function(t,e,r){"use strict";var n=r(11),o=r(40),i=r(41),a=r(83),s=i();n(s,{getPolyfill:i,implementation:o,shim:a}),t.exports=s},function(t,e,r){"use strict";var n=r(11),o=r(41);t.exports=function(){var t=o();return n(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t}},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.ToneOscillatorVis=void 0;const i=r(0),a=r(9);let s=class extends a.VisBase{generate(){return o(this,void 0,void 0,(function*(){if(!this.tone)return;const t=yield this.tone.asArray(600);this.draw(t)}))}bind(t){this.tone=t,this.generate()}};s=n([i.customElement("tone-oscillator-vis")],s),e.ToneOscillatorVis=s},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.ToneEnvelopeVis=void 0;const i=r(9),a=r(0),s=r(22);let c=class extends i.VisBase{generate(){return o(this,void 0,void 0,(function*(){if(!this.tone)return;const t=yield this.tone.asArray(this.width);this.draw(t),this.requestUpdate()}))}bind(t){this.tone=t,this.generate()}render(){const t=[];if(this.tone){const e=4,r=1.1*(this.tone.toSeconds(this.tone.attack)+this.tone.toSeconds(this.tone.decay)+this.tone.toSeconds(this.tone.release)),n=Math.pow(2,Math.ceil(Math.log2(r/e))),o=n.toString().split(".")[1]&&n.toString().split(".")[1].length||0;for(let e=0;e<.9*r;e+=n){const n=e/r;t.push({x:n,time:e.toFixed(o)})}}return a.html`
			<style>
				#timeline {
					margin-top: -10px;
					font-size: 10px;
					font-family: monospace;
					position: relative;
					height: 20px;
				}
				#timeline span {
					position: absolute;
				}
			</style>
			${super.render()}
			<div id="timeline">
				${t.map(({x:t,time:e})=>a.html`
						<span
							style=${s.styleMap({left:(100*t).toFixed(2)+"%"})}
						>
							${e}s
						</span>
					`)}
			</div>
		`}};c=n([a.customElement("tone-envelope-vis")],c),e.ToneEnvelopeVis=c},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.ToneFFTVis=void 0;const o=r(9),i=r(0);let a=class extends o.VisBase{generate(){if(!this.tone)return;const t=this.tone.getFrequencyResponse(this.width);this.draw(t)}bind(t){this.tone=t,this.generate()}};a=n([i.customElement("tone-filter-vis")],a),e.ToneFFTVis=a},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.ToneCompressorVis=void 0;const i=r(0),a=r(9);let s=class extends a.VisBase{constructor(){super(...arguments),this.normalizeCurve=!1}generate(){return o(this,void 0,void 0,(function*(){if(!this.tone)return;const t=this.width,e=this.scale(this.tone.knee.value,0,100,0,t),r=this.scale(this.tone.threshold.value,-100,40,0,t),n=new Float32Array(t),o=this.tone.ratio.value,i=r-e/2,a=r+e/2,s=this.scale(i,0,t,0,1),c=this.scale(r,0,t,0,1),u=n.map((e,n)=>{const u=this.scale(n,0,t,0,1);if(n<i)return u;if(i<=n&&n<=a){const e=this.scale(a-r,0,t,0,1),u=c+e*(1/o);return this.scale(n,i,a,s,u)}{const e=this.scale(n-r,0,t,0,1);return c+e*(1/o)}});this.draw(u)}))}draw(t){super.draw(t);const e=this.shadowRoot.querySelector("canvas"),r=e.getContext("2d");r.setLineDash([2,2]),r.lineWidth=1,r.strokeStyle="rgba(0, 0, 0, 0.25)";const n=this.scale(this.tone.threshold.value,-100,40,0,e.width),o=this.scale(this.tone.threshold.value,-100,40,e.height,0);r.moveTo(n,0),r.lineTo(n,e.height),r.stroke(),r.moveTo(0,o),r.lineTo(e.width,o),r.stroke(),r.setLineDash([])}bind(t){this.tone=t,this.generate(),this.loop()}loop(){requestAnimationFrame(this.loop.bind(this));const t=this.scale(this.tone.reduction,0,-100,0,100);this.shadowRoot.querySelector("#reduction #fill").style.height=t.toFixed(1)+"%"}render(){return i.html`
			<style>
				#container {
					margin-top: 5px;
					position: relative;
				}

				canvas {
					width: calc(100% - 50px);
					height: ${this.height}px;
				}

				#reduction {
					position: absolute;
					width: 20px;
					height: ${this.height}px;
					right: 0px;
					top: 0px;
				}

				#reduction #fill {
					background-color: black;
					width: 100%;
					height: 0%;
					top: 0px;
					left: 0px;
				}
			</style>
			<div id="container">
				<canvas></canvas>
				<div id="reduction">
					<div id="fill"></div>
				</div>
			</div>
		`}};s=n([i.customElement("tone-compressor-vis")],s),e.ToneCompressorVis=s},function(t,e,r){"use strict";var n=r(89),o=r(92),i=[].slice,a=["keyword","gray","hex"],s={};Object.keys(o).forEach((function(t){s[i.call(o[t].labels).sort().join("")]=t}));var c={};function u(t,e){if(!(this instanceof u))return new u(t,e);if(e&&e in a&&(e=null),e&&!(e in o))throw new Error("Unknown model: "+e);var r,l;if(null==t)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof u)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if("string"==typeof t){var p=n.get(t);if(null===p)throw new Error("Unable to parse color from string: "+t);this.model=p.model,l=o[this.model].channels,this.color=p.value.slice(0,l),this.valpha="number"==typeof p.value[l]?p.value[l]:1}else if(t.length){this.model=e||"rgb",l=o[this.model].channels;var h=i.call(t,0,l);this.color=f(h,l),this.valpha="number"==typeof t[l]?t[l]:1}else if("number"==typeof t)t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;var d=Object.keys(t);"alpha"in t&&(d.splice(d.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0);var y=d.sort().join("");if(!(y in s))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=s[y];var m=o[this.model].labels,v=[];for(r=0;r<m.length;r++)v.push(t[m[r]]);this.color=f(v)}if(c[this.model])for(l=o[this.model].channels,r=0;r<l;r++){var g=c[this.model][r];g&&(this.color[r]=g(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function l(t,e,r){return(t=Array.isArray(t)?t:[t]).forEach((function(t){(c[t]||(c[t]=[]))[e]=r})),t=t[0],function(n){var o;return arguments.length?(r&&(n=r(n)),(o=this[t]()).color[e]=n,o):(o=this[t]().color[e],r&&(o=r(o)),o)}}function p(t){return function(e){return Math.max(0,Math.min(t,e))}}function h(t){return Array.isArray(t)?t:[t]}function f(t,e){for(var r=0;r<e;r++)"number"!=typeof t[r]&&(t[r]=0);return t}u.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in n.to?this:this.rgb(),r=1===(e=e.round("number"==typeof t?t:1)).valpha?e.color:e.color.concat(this.valpha);return n.to[e.model](r)},percentString:function(t){var e=this.rgb().round("number"==typeof t?t:1),r=1===e.valpha?e.color:e.color.concat(this.valpha);return n.to.rgb.percent(r)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=o[this.model].channels,r=o[this.model].labels,n=0;n<e;n++)t[r[n]]=this.color[n];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new u(this.color.map(function(t){return function(e){return function(t,e){return Number(t.toFixed(e))}(e,t)}}(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new u(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:l("rgb",0,p(255)),green:l("rgb",1,p(255)),blue:l("rgb",2,p(255)),hue:l(["hsl","hsv","hsl","hwb","hcg"],0,(function(t){return(t%360+360)%360})),saturationl:l("hsl",1,p(100)),lightness:l("hsl",2,p(100)),saturationv:l("hsv",1,p(100)),value:l("hsv",2,p(100)),chroma:l("hcg",1,p(100)),gray:l("hcg",2,p(100)),white:l("hwb",1,p(100)),wblack:l("hwb",2,p(100)),cyan:l("cmyk",0,p(100)),magenta:l("cmyk",1,p(100)),yellow:l("cmyk",2,p(100)),black:l("cmyk",3,p(100)),x:l("xyz",0,p(100)),y:l("xyz",1,p(100)),z:l("xyz",2,p(100)),l:l("lab",0,p(100)),a:l("lab",1),b:l("lab",2),keyword:function(t){return arguments.length?new u(t):o[this.model].keyword(this.color)},hex:function(t){return arguments.length?new u(t):n.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity:function(){for(var t=this.rgb().color,e=[],r=0;r<t.length;r++){var n=t[r]/255;e[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=.3*t[0]+.59*t[1]+.11*t[2];return u.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),r=e.color[0];return r=(r=(r+t)%360)<0?360+r:r,e.color[0]=r,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var r=t.rgb(),n=this.rgb(),o=void 0===e?.5:e,i=2*o-1,a=r.alpha()-n.alpha(),s=((i*a==-1?i:(i+a)/(1+i*a))+1)/2,c=1-s;return u.rgb(s*r.red()+c*n.red(),s*r.green()+c*n.green(),s*r.blue()+c*n.blue(),r.alpha()*o+n.alpha()*(1-o))}},Object.keys(o).forEach((function(t){if(-1===a.indexOf(t)){var e=o[t].channels;u.prototype[t]=function(){if(this.model===t)return new u(this);if(arguments.length)return new u(arguments,t);var r="number"==typeof arguments[e]?e:this.valpha;return new u(h(o[this.model][t].raw(this.color)).concat(r),t)},u[t]=function(r){return"number"==typeof r&&(r=f(i.call(arguments),e)),new u(r,t)}}})),t.exports=u},function(t,e,r){var n=r(43),o=r(90),i={};for(var a in n)n.hasOwnProperty(a)&&(i[n[a]]=a);var s=t.exports={to:{},get:{}};function c(t,e,r){return Math.min(Math.max(e,t),r)}function u(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}s.get=function(t){var e,r;switch(t.substring(0,3).toLowerCase()){case"hsl":e=s.get.hsl(t),r="hsl";break;case"hwb":e=s.get.hwb(t),r="hwb";break;default:e=s.get.rgb(t),r="rgb"}return e?{model:r,value:e}:null},s.get.rgb=function(t){if(!t)return null;var e,r,o,i=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(o=e[2],e=e[1],r=0;r<3;r++){var a=2*r;i[r]=parseInt(e.slice(a,a+2),16)}o&&(i[3]=Math.round(parseInt(o,16)/255*100)/100)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(o=(e=e[1])[3],r=0;r<3;r++)i[r]=parseInt(e[r]+e[r],16);o&&(i[3]=Math.round(parseInt(o+o,16)/255*100)/100)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(r=0;r<3;r++)i[r]=parseInt(e[r+1],0);e[4]&&(i[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(e=t.match(/(\D+)/))?"transparent"===e[1]?[0,0,0,0]:(i=n[e[1]])?(i[3]=1,i):null:null;for(r=0;r<3;r++)i[r]=Math.round(2.55*parseFloat(e[r+1]));e[4]&&(i[3]=parseFloat(e[4]))}for(r=0;r<3;r++)i[r]=c(i[r],0,255);return i[3]=c(i[3],0,1),i},s.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var r=parseFloat(e[4]);return[(parseFloat(e[1])+360)%360,c(parseFloat(e[2]),0,100),c(parseFloat(e[3]),0,100),c(isNaN(r)?1:r,0,1)]}return null},s.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var r=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,c(parseFloat(e[2]),0,100),c(parseFloat(e[3]),0,100),c(isNaN(r)?1:r,0,1)]}return null},s.to.hex=function(){var t=o(arguments);return"#"+u(t[0])+u(t[1])+u(t[2])+(t[3]<1?u(Math.round(255*t[3])):"")},s.to.rgb=function(){var t=o(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},s.to.rgb.percent=function(){var t=o(arguments),e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"},s.to.hsl=function(){var t=o(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},s.to.hwb=function(){var t=o(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},s.to.keyword=function(t){return i[t.slice(0,3)]}},function(t,e,r){"use strict";var n=r(91),o=Array.prototype.concat,i=Array.prototype.slice,a=t.exports=function(t){for(var e=[],r=0,a=t.length;r<a;r++){var s=t[r];n(s)?e=o.call(e,i.call(s)):e.push(s)}return e};a.wrap=function(t){return function(){return t(a(arguments))}}},function(t,e){t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},function(t,e,r){var n=r(44),o=r(93),i={};Object.keys(n).forEach((function(t){i[t]={},Object.defineProperty(i[t],"channels",{value:n[t].channels}),Object.defineProperty(i[t],"labels",{value:n[t].labels});var e=o(t);Object.keys(e).forEach((function(r){var n=e[r];i[t][r]=function(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var r=t(e);if("object"==typeof r)for(var n=r.length,o=0;o<n;o++)r[o]=Math.round(r[o]);return r};return"conversion"in t&&(e.conversion=t.conversion),e}(n),i[t][r].raw=function(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(n)}))})),t.exports=i},function(t,e,r){var n=r(44);function o(t){var e=function(){for(var t={},e=Object.keys(n),r=e.length,o=0;o<r;o++)t[e[o]]={distance:-1,parent:null};return t}(),r=[t];for(e[t].distance=0;r.length;)for(var o=r.pop(),i=Object.keys(n[o]),a=i.length,s=0;s<a;s++){var c=i[s],u=e[c];-1===u.distance&&(u.distance=e[o].distance+1,u.parent=o,r.unshift(c))}return e}function i(t,e){return function(r){return e(t(r))}}function a(t,e){for(var r=[e[t].parent,t],o=n[e[t].parent][t],a=e[t].parent;e[a].parent;)r.unshift(e[a].parent),o=i(n[e[a].parent][a],o),a=e[a].parent;return o.conversion=r,o}t.exports=function(t){for(var e=o(t),r={},n=Object.keys(e),i=n.length,s=0;s<i;s++){var c=n[s];null!==e[c].parent&&(r[c]=a(c,e))}return r}},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.ToneBufferViz=void 0;const i=r(0),a=r(9);let s=class extends a.VisBase{generate(){return o(this,void 0,void 0,(function*(){if(!this.tone)return;this.tone.buffer.loaded||(yield new Promise(t=>this.tone.buffer.onload=t));const t=this.tone.buffer.getChannelData(0);this.draw(t)}))}bind(t){this.tone=t,this.generate()}};s=n([i.customElement("tone-buffer-vis")],s),e.ToneBufferViz=s},function(t,e,r){var n=r(96);t.exports="string"==typeof n?n:n.toString()},function(t,e,r){(e=r(18)(!1)).push([t.i,':host{max-width:320px;width:100%;display:block}#container{font-family:"Open Sans",sans-serif;margin-bottom:10px;border-bottom:1px solid #ddd;max-width:320px;width:100%}#container #title{font-size:18px !important;font-family:"Roboto",sans-serif}#container .value{display:block;margin-top:4px}#container details{margin-top:4px;font-size:14px;line-height:24px}#container details.sub-value{background-color:rgba(0,0,0,0.05);padding:5px}#container details #json{font-size:0.8em}#container details #json summary{color:#f5871f;padding-left:10px}#container details #json summary mwc-icon{--mdc-icon-size: 10px}#container details #json pre{overflow:scroll}#container details summary{list-style:none}#container details summary mwc-icon{position:relative;transform:translate(0px, 4px);height:20px;font-size:20px;margin-left:0px}#container details summary #download{position:absolute;right:10px;color:#ececec}#container details summary#title{padding:2px 2px 5px 2px}#container details summary::-webkit-details-marker{display:none}#container details summary::marker{display:none}#container details summary:focus{outline:none;background-color:#fcd5b1}\n',""]),t.exports=e},function(t,e,r){var n=r(98);t.exports="string"==typeof n?n:n.toString()},function(t,e,r){(e=r(18)(!1)).push([t.i,'#container{font-family:"Roboto",sans-serif;width:calc(100% - 20px);margin-bottom:10px}#container details{width:100%}#container details summary{font-weight:bold;font-size:1.1em;border-bottom:1px solid black;list-style:none}#container details summary mwc-icon{position:relative;transform:translate(0px, 4px);height:20px;font-size:20px;margin-left:0px}#container details summary::-webkit-details-marker{display:none}#container details summary::marker{display:none}#container details #contents{width:calc(100% - 5px);margin-left:5px}\n',""]),t.exports=e},function(t,e,r){var n=r(100);t.exports="string"==typeof n?n:n.toString()},function(t,e,r){(e=r(18)(!1)).push([t.i,'#container{display:inline-block;position:fixed;right:0px;bottom:0px;width:320px;background-color:white;z-index:1000000;box-shadow:0 3px 6px rgba(0,0,0,0.16),0 3px 6px rgba(0,0,0,0.23)}#container[hidden]{display:none}#container:not([open]){height:20px}#container #scroll{display:inline-block;max-height:calc( 100vh - 24px - 20px);margin-top:20px;width:calc(100% - 20px);overflow-y:auto;padding:10px;padding-bottom:0px}#container #scroll #inner-scroll{display:inline-block;width:100%}#container details summary{background-color:#ececec;color:#616161;text-align:center;font-family:"Roboto",sans-serif;text-align:center;position:absolute;top:3px;width:calc(100% - 6px);left:3px;font-size:0.8em;height:14px;line-height:14px;border-radius:3px;cursor:pointer;list-style:none}#container details summary mwc-icon{position:absolute;top:0px;left:0px;height:14px;font-size:14px}#container details summary::-webkit-details-marker{display:none}#container details summary::marker{display:none}\n',""]),t.exports=e},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.ToneKeyboard=void 0;const o=r(0),i=r(102);r(109),r(110);let a=class extends o.LitElement{constructor(){super(),this.rootoctave=4,this.octaves=4,this.polyphonic=!1,this._computerKeyboard=new i({polyphony:1/0}),this._computerKeyboard.down(t=>{this.noteon(t.note)}),this._computerKeyboard.up(t=>{this.noteoff(t.note)})}getNoteByTouchId(t){const e=Array.from(this.shadowRoot.querySelectorAll("tone-keyboard-octave")).find(e=>e.getNoteByTouchId(t));if(e)return e.getNoteByTouchId(t)}_touchmove(t){Array.from(t.changedTouches).forEach(t=>{this.getNoteByTouchId(t.identifier);const e=this.getNoteByTouchId(t.identifier),r=this.shadowRoot.elementFromPoint(t.clientX,t.clientY);if(r&&r.shadowRoot){const n=r.shadowRoot.elementFromPoint(t.clientX,t.clientY);n&&n.note&&e.note!==n.note&&(e.active=!1,e.touchid=-1,n.active=!0,n.touchid=t.identifier)}})}_touchend(t){Array.from(t.changedTouches).forEach(t=>{this.getNoteByTouchId(t.identifier);const e=this.getNoteByTouchId(t.identifier);e&&e.active&&(e.active=!1,e.touchid=-1)})}noteon(t){const e=Math.floor(t/12),r=this.shadowRoot.querySelector(`tone-keyboard-octave[octave="${e}"]`);r&&r.noteon(t)}noteoff(t){const e=Math.floor(t/12),r=this.shadowRoot.querySelector(`tone-keyboard-octave[octave="${e}"]`);r&&r.noteoff(t)}render(){const t=[];for(let e=this.rootoctave;e<this.rootoctave+this.octaves;e++)t.push(e);return o.html`
			<style>
				#container {
					display: flex;
					background-color: white;
					height: 80px;
				}

				tone-keyboard-octave {
					flex-grow: 1;
				}
			</style>
			<div
				id="container"
				@touchmove=${this._touchmove.bind(this)}
				@touchend=${this._touchend.bind(this)}
			>
				${t.map(t=>o.html`
						<tone-keyboard-octave
							octave=${t.toString()}
						></tone-keyboard-octave>
					`)}
			</div>
		`}};n([o.property({type:Number})],a.prototype,"rootoctave",void 0),n([o.property({type:Number})],a.prototype,"octaves",void 0),n([o.property({type:Boolean})],a.prototype,"polyphonic",void 0),a=n([o.customElement("tone-keyboard")],a),e.ToneKeyboard=a},function(t,e,r){var n=r(103),o=r(104),i=r(105),a=r(106),s=r(107),c=r(108);function u(t){this._setState(t),this._listeners={},this._bind()}u.prototype._setState=n._setState,u.prototype._extendState=n._extendState,u.prototype.set=n.set,u.prototype.get=n.get,u.prototype.down=o.down,u.prototype.up=o.up,u.prototype._trigger=o._trigger,u.prototype._bind=o._bind,u.prototype._map=i._map,u.prototype._offset=i._offset,u.prototype._isNote=i._isNote,u.prototype._toFrequency=i._toFrequency,u.prototype._keyMap=i._keyMap,u.prototype._addKey=a._addKey,u.prototype._removeKey=a._removeKey,u.prototype._isPressed=a._isPressed,u.prototype._makeNote=a._makeNote,u.prototype.clear=a.clear,u.prototype._update=a._update,u.prototype._diff=a._diff,u.prototype._prioritize=s._prioritize,u.prototype._last=s._last,u.prototype._first=s._first,u.prototype._highest=s._highest,u.prototype._lowest=s._lowest,u.prototype._isSpecialKey=c._isSpecialKey,u.prototype._specialKey=c._specialKey,u.prototype._specialKeyMap=c._specialKeyMap,t.exports=u},function(t,e){t.exports={_setState:function(t){t||(t={}),this._state={},this._extendState({polyphony:4,rows:1,priority:"last",rootNote:60,octaveControls:!0,octave:0,velocityControls:!0,velocity:127,keys:[],buffer:[]}),this._extendState(t)},_extendState:function(t){for(var e in t)this._state[e]=t[e]},set:function(){var t=this;return 1===arguments.length?t._extendState(arguments[0]):t._state[arguments[0]]=arguments[1],this},get:function(t){return this._state[t]}}},function(t,e){t.exports={down:function(t){this._listeners.down=(this._listeners.down||[]).concat(t)},up:function(t){this._listeners.up=(this._listeners.up||[]).concat(t)},_trigger:function(t){var e=this;if(e._listeners[t]&&e._listeners[t].length){var r=Array.prototype.slice.call(arguments);r.splice(0,1),e._listeners[t].forEach((function(t){t.apply(e,r)}))}},_bind:function(){var t=this;if("undefined"!=typeof window&&window.document){window.document.addEventListener("keydown",(function(e){t._addKey(e)})),window.document.addEventListener("keyup",(function(e){t._removeKey(e)}));var e=!0;setInterval((function(){window.document.hasFocus()!==e&&((e=!e)||t.clear())}),100)}}}},function(t,e){t.exports={_map:function(t){return this._keyMap[this._state.rows][t]+this._offset()},_offset:function(){return this._state.rootNote-this._keyMap[this._state.rows].root+12*this._state.octave},_isNote:function(t){return!!this._keyMap[this._state.rows][t]},_toFrequency:function(t){return 440*Math.pow(2,(t-69)/12)},_keyMap:{1:{root:60,65:60,87:61,83:62,69:63,68:64,70:65,84:66,71:67,89:68,72:69,85:70,74:71,75:72,79:73,76:74,80:75,186:76,222:77},2:{root:60,90:60,83:61,88:62,68:63,67:64,86:65,71:66,66:67,72:68,78:69,74:70,77:71,188:72,76:73,190:74,186:75,191:76,81:72,50:73,87:74,51:75,69:76,82:77,53:78,84:79,54:80,89:81,55:82,85:83,73:84,57:85,79:86,48:87,80:88,219:89,187:90,221:91}}}},function(t,e){t.exports={_addKey:function(t){if(this._isNote(t.keyCode)&&!this._isPressed(t.keyCode)){var e=this._makeNote(t.keyCode);this._state.keys=(this._state.keys||[]).concat(e),this._update()}else this._isSpecialKey(t.keyCode)&&this._specialKey(t.keyCode)},_removeKey:function(t){if(this._isPressed(t.keyCode)){for(var e,r=0;r<this._state.keys.length;r++)if(this._state.keys[r].keyCode===t.keyCode){e=this._state.keys[r];break}this._state.keys.splice(this._state.keys.indexOf(e),1),this._update()}},_isPressed:function(t){if(!this._state.keys||!this._state.keys.length)return!1;for(var e=0;e<this._state.keys.length;e++)if(this._state.keys[e].keyCode===t)return!0;return!1},_makeNote:function(t){return{keyCode:t,note:this._map(t),frequency:this._toFrequency(this._map(t)),velocity:this._state.velocity}},clear:function(){var t=this;t._state.buffer.forEach((function(e){e.velocity=0,t._trigger("up",e)})),t._state.keys=[],t._state.buffer=[]},_update:function(){var t=this._state.buffer;this._prioritize(),this._diff(t)},_diff:function(t){var e=this,r=t.map((function(t){return t.keyCode})),n=e._state.buffer.map((function(t){return t.keyCode})),o=[];r.forEach((function(t){-1===n.indexOf(t)&&o.push(t)}));var i=[];n.forEach((function(t){-1===r.indexOf(t)&&i.push(t)})),i.forEach((function(t){for(var r=0;r<e._state.buffer.length;r++)if(e._state.buffer[r].keyCode===t){e._trigger("down",e._state.buffer[r]);break}})),o.forEach((function(r){for(var n=0;n<t.length;n++)if(t[n].keyCode===r){t[n].velocity=0,e._trigger("up",t[n]);break}}))}}},function(t,e){t.exports={_prioritize:function(){var t=this;t._state.keys.length?(t._state.polyphony>=t._state.keys.length?t._state.keys=t._state.keys.map((function(t){return t.isActive=!0,t})):(t._state.keys=t._state.keys.map((function(t){return t.isActive=!1,t})),t["_"+t._state.priority]()),t._state.buffer=[],t._state.keys.forEach((function(e){e.isActive&&t._state.buffer.push(e)}))):t._state.buffer=[]},_last:function(){for(var t=this._state.keys.length-this._state.polyphony;t<this._state.keys.length;t++)this._state.keys[t].isActive=!0},_first:function(){for(var t=0;t<this._state.polyphony;t++)this._state.keys[t].isActive=!0},_highest:function(){var t=this._state.keys.map((function(t){return t.note}));t.sort((function(t,e){return e===t?0:e<t?-1:1})),t.splice(this._state.polyphony,Number.MAX_VALUE),this._state.keys.forEach((function(e){-1!==t.indexOf(e.note)&&(e.isActive=!0)}))},_lowest:function(){var t=this._state.keys.map((function(t){return t.note}));t.sort((function(t,e){return t===e?0:t<e?-1:1})),t.splice(this._state.polyphony,Number.MAX_VALUE),this._state.keys.forEach((function(e){-1!==t.indexOf(e.note)&&(e.isActive=!0)}))}}},function(t,e){t.exports={_isSpecialKey:function(t){return 1===this._state.rows&&this._specialKeyMap[t]},_specialKey:function(t){"octave"===this._specialKeyMap[t].type&&this._state.octaveControls?this._state.octave+=this._specialKeyMap[t].value:"velocity"===this._specialKeyMap[t].type&&this._state.velocityControls&&(this._state.velocity=this._specialKeyMap[t].value)},_specialKeyMap:{90:{type:"octave",value:-1},88:{type:"octave",value:1},49:{type:"velocity",value:1},50:{type:"velocity",value:14},51:{type:"velocity",value:28},52:{type:"velocity",value:42},53:{type:"velocity",value:56},54:{type:"velocity",value:70},55:{type:"velocity",value:84},56:{type:"velocity",value:98},57:{type:"velocity",value:112},48:{type:"velocity",value:127}}}},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.ToneKeyboardOctave=void 0;const o=r(0);let i=class extends o.LitElement{constructor(){super(...arguments),this.octave=1}noteon(t){this.shadowRoot.querySelector(`tone-keyboard-note[note="${t}"]`).active=!0}noteoff(t){this.shadowRoot.querySelector(`tone-keyboard-note[note="${t}"]`).active=!1}getNoteByTouchId(t){const e=Array.from(this.shadowRoot.querySelectorAll("tone-keyboard-note")).find(e=>e.touchid===t);if(e&&e.note)return e}static get styles(){return o.css`
			#container {
				display: block;
				position: relative;
				height: 100%;
				width: 100%;
			}
			tone-keyboard-note {
				order: 0;
				flex-grow: 1;
			}

			#white-notes {
				position: absolute;
				left: 0px;
				top: 0px;
				width: 100%;
				height: 100%;
				display: flex;
				flex-direction: row;
			}

			#black-notes {
				position: absolute;
				top: 0px;
				width: 100%;
				display: flex;
				flex-direction: row;
				height: 55%;
			}

			#black-notes tone-keyboard-note:first-child,
			#black-notes tone-keyboard-note:last-child {
				flex-grow: 0.5;
				pointer-events: none;
			}
		`}render(){const t=12*this.octave,e=[0,2,4,5,7,9,11].map(e=>e+t),r=[0,1,3,0,6,8,10,0].map(e=>e?e+t:0);return o.html`
			<div id="container">
				<div id="white-notes">
					${e.map(t=>o.html`
							<tone-keyboard-note
								color="#aaa"
								note="${t.toString()}"
							></tone-keyboard-note>
						`)}
				</div>
				<div id="black-notes">
					${r.map(t=>o.html`
							<tone-keyboard-note
								color="black"
								note="${t.toString()}"
							></tone-keyboard-note>
						`)}
				</div>
			</div>
		`}};n([o.property({type:Number})],i.prototype,"octave",void 0),i=n([o.customElement("tone-keyboard-octave")],i),e.ToneKeyboardOctave=i},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.ToneKeyboardNote=void 0;const o=r(0),i=r(111);let a=class extends o.LitElement{constructor(){super(...arguments),this.color="#eee",this.activecolor="white",this.active=!1,this.touchid=-1}_fromMidi(t){return i.Midi(t).toNote()}updated(t){if(t.has("active")&&void 0!==t.get("active")){const t=this.active?"noteon":"noteoff";this.active||(this.touchid=-1),this.dispatchEvent(new CustomEvent(t,{detail:{name:this._fromMidi(this.note),midi:this.note,velocity:this.active?1:0},composed:!0,bubbles:!0}))}}_mouseover(t){t.buttons&&(this.active=!0,this.shadowRoot.querySelector("button").focus())}_keydown(t){t.repeat||" "!==t.key&&"Enter"!==t.key||(this.active=!0)}_keyup(t){" "!==t.key&&"Enter"!==t.key||(this.active=!1)}_touchstart(t){t.preventDefault(),this.touchid=t.touches[0].identifier,this.active=!0}static get styles(){return o.css`
			:host {
				display: block;
			}

			#container {
				width: 100%;
				height: 100%;
				display: block;
			}
			#container:not([show]) {
				opacity: 0;
				margin: 2px;
				pointer-events: none;
			}

			button {
				border: none;
				-webkit-appearance: none;
				--key-margin: 2px;
				width: 100%;
				height: 100%;
				border: 2px solid white;
				box-sizing: border-box;
				padding: 0;
				outline: none;
				transition: background-color 0.2s;
				color: transparent;
				font-size: 0px;
				border-radius: 2px;
			}
			button[active] {
				background-color: #666 !important;
				transition-duration: 0s;
			}
			button:focus {
				border-color: #666;
			}
		`}render(){const t=0!==this.note;return o.html`
			<div id="container" ?show=${t}>
				${t?o.html` <button
							?active=${this.active}
							@mouseover=${this._mouseover.bind(this)}
							@mouseleave=${()=>this.active=!1}
							@mousedown=${()=>this.active=!0}
							@touchstart=${this._touchstart.bind(this)}
							@touchend=${()=>this.active=!1}
							@mouseup=${()=>this.active=!1}
							@keydown=${this._keydown.bind(this)}
							@keyup=${this._keyup.bind(this)}
							style="background-color: ${this.active?this.activecolor:this.color};"
					  >
							${this._fromMidi(this.note).replace("#","")}
					  </button>`:o.html``}
			</div>
		`}};n([o.property({type:Number})],a.prototype,"note",void 0),n([o.property({type:String})],a.prototype,"color",void 0),n([o.property({type:String})],a.prototype,"activecolor",void 0),n([o.property({type:Boolean})],a.prototype,"active",void 0),n([o.property({type:Number})],a.prototype,"velocity",void 0),n([o.property({type:Number})],a.prototype,"touchid",void 0),a=n([o.customElement("tone-keyboard-note")],a),e.ToneKeyboardNote=a},function(e,r){e.exports=t},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.ToneMidiIn=void 0;const o=r(0),i=r(113);let a=class extends o.LitElement{constructor(){super(),this._flashTimeout=-1,i.enable(t=>{t||(i.addListener("connected",t=>{"input"===t.port.type&&this.requestUpdate()}),i.addListener("disconnected",t=>{this.requestUpdate()}))})}_flash(){clearTimeout(this._flashTimeout);const t=this.shadowRoot.querySelector("#light");t.classList.add("flash"),this._flashTimeout=setTimeout(()=>t.classList.remove("flash"),100)}_connectMidi(t){if("none"===t.target.value)return void this.shadowRoot.querySelector("#light").classList.remove("connected");this.shadowRoot.querySelector("#light").classList.add("connected");const e=i.getInputById(t.target.value);e&&(e.addListener("noteon","all",t=>{const e=`${t.note.name}${t.note.octave}`,r=t.note.number;this._flash(),this.dispatchEvent(new CustomEvent("noteon",{detail:{name:e,midi:r,velocity:t.velocity},composed:!0,bubbles:!0}))}),e.addListener("noteoff","all",t=>{const e=`${t.note.name}${t.note.octave}`,r=t.note.number;this._flash(),this.dispatchEvent(new CustomEvent("noteoff",{detail:{name:e,midi:r,velocity:t.velocity},composed:!0,bubbles:!0}))}),e.addListener("controlchange","all",t=>{this._flash()}))}static get styles(){return o.css`
			:host {
				display: block;
			}

			#container {
				display: block;
				margin-bottom: 10px;
				position: relative;
			}
			label {
				font-family: var(--label-font-family);
				font-size: var(--label-font-size);
				margin-right: 5px;
				font-size: 0.7em;
			}

			select,
			label {
				display: inline-block;
			}

			#light {
				width: 10px;
				height: 10px;
				background-color: white;
				display: inline-block;
			}
			#light.connected {
				background-color: var(--color-gray);
			}

			#light.connected.flash {
				background-color: black !important;
			}
		`}render(){return i.supported?o.html`
				<div id="container">
					<div id="light"></div>
					<label>MIDI IN:</label>
					<select @change=${this._connectMidi.bind(this)}>
						<option value="none">none</option>
						${i.inputs.map(t=>o.html`
								<option value=${t.id}>${t.name}</option>
							`)}
					</select>
				</div>
			`:o.html``}};a=n([o.customElement("tone-midi-in")],a),e.ToneMidiIn=a},function(t,e,r){var n;!function(r){"use strict";function o(){if(o.prototype._singleton)throw new Error("WebMidi is a singleton, it cannot be instantiated directly.");(o.prototype._singleton=this)._inputs=[],this._outputs=[],this._userHandlers={},this._stateChangeQueue=[],this._processingStateChange=!1,this._midiInterfaceEvents=["connected","disconnected"],this._nrpnBuffer=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],this._nrpnEventsEnabled=!0,this._nrpnTypes=["entry","increment","decrement"],this._notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this._semitones={C:0,D:2,E:4,F:5,G:7,A:9,B:11},Object.defineProperties(this,{MIDI_SYSTEM_MESSAGES:{value:{sysex:240,timecode:241,songposition:242,songselect:243,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MESSAGES:{value:{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,channelmode:11,nrpn:11,programchange:12,channelaftertouch:13,pitchbend:14},writable:!1,enumerable:!0,configurable:!1},MIDI_REGISTERED_PARAMETER:{value:{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]},writable:!1,enumerable:!0,configurable:!1},MIDI_CONTROL_CHANGE_MESSAGES:{value:{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101},writable:!1,enumerable:!0,configurable:!1},MIDI_NRPN_MESSAGES:{value:{entrymsb:6,entrylsb:38,increment:96,decrement:97,paramlsb:98,parammsb:99,nullactiveparameter:127},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MODE_MESSAGES:{value:{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127},writable:!1,enumerable:!0,configurable:!1},octaveOffset:{value:0,writable:!0,enumerable:!0,configurable:!1}}),Object.defineProperties(this,{supported:{enumerable:!0,get:function(){return"requestMIDIAccess"in navigator}},enabled:{enumerable:!0,get:function(){return void 0!==this.interface}.bind(this)},inputs:{enumerable:!0,get:function(){return this._inputs}.bind(this)},outputs:{enumerable:!0,get:function(){return this._outputs}.bind(this)},sysexEnabled:{enumerable:!0,get:function(){return!(!this.interface||!this.interface.sysexEnabled)}.bind(this)},nrpnEventsEnabled:{enumerable:!0,get:function(){return!!this._nrpnEventsEnabled}.bind(this),set:function(t){return this._nrpnEventsEnabled=t,this._nrpnEventsEnabled}},nrpnTypes:{enumerable:!0,get:function(){return this._nrpnTypes}.bind(this)},time:{enumerable:!0,get:function(){return performance.now()}}})}var i=new o;function a(t){var e=this;this._userHandlers={channel:{},system:{}},this._midiInput=t,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return e._midiInput.connection}},id:{enumerable:!0,get:function(){return e._midiInput.id}},manufacturer:{enumerable:!0,get:function(){return e._midiInput.manufacturer}},name:{enumerable:!0,get:function(){return e._midiInput.name}},state:{enumerable:!0,get:function(){return e._midiInput.state}},type:{enumerable:!0,get:function(){return e._midiInput.type}}}),this._initializeUserHandlers(),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}function s(t){var e=this;this._midiOutput=t,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return e._midiOutput.connection}},id:{enumerable:!0,get:function(){return e._midiOutput.id}},manufacturer:{enumerable:!0,get:function(){return e._midiOutput.manufacturer}},name:{enumerable:!0,get:function(){return e._midiOutput.name}},state:{enumerable:!0,get:function(){return e._midiOutput.state}},type:{enumerable:!0,get:function(){return e._midiOutput.type}}})}o.prototype.enable=function(t,e){this.enabled||(this.supported?navigator.requestMIDIAccess({sysex:e}).then(function(e){var r,n=[],o=[];this.interface=e,this._resetInterfaceUserHandlers(),this.interface.onstatechange=function(t){n.push(t)};for(var i=e.inputs.values(),a=i.next();a&&!a.done;a=i.next())o.push(a.value.open());for(var s=e.outputs.values(),c=s.next();c&&!c.done;c=s.next())o.push(c.value.open());function u(){clearTimeout(r),this._updateInputsAndOutputs(),this.interface.onstatechange=this._onInterfaceStateChange.bind(this),"function"==typeof t&&t.call(this),n.forEach(function(t){this._onInterfaceStateChange(t)}.bind(this))}r=setTimeout(u.bind(this),200),Promise&&Promise.all(o).catch((function(t){})).then(u.bind(this))}.bind(this),function(e){"function"==typeof t&&t.call(this,e)}.bind(this)):"function"==typeof t&&t(new Error("The Web MIDI API is not supported by your browser.")))},o.prototype.disable=function(){if(!this.supported)throw new Error("The Web MIDI API is not supported by your browser.");this.interface&&(this.interface.onstatechange=void 0),this.interface=void 0,this._inputs=[],this._outputs=[],this._nrpnEventsEnabled=!0,this._resetInterfaceUserHandlers()},o.prototype.addListener=function(t,e){if(!this.enabled)throw new Error("WebMidi must be enabled before adding event listeners.");if("function"!=typeof e)throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(t)))throw new TypeError("The specified event type is not supported.");return this._userHandlers[t].push(e),this},o.prototype.hasListener=function(t,e){if(!this.enabled)throw new Error("WebMidi must be enabled before checking event listeners.");if("function"!=typeof e)throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(t)))throw new TypeError("The specified event type is not supported.");for(var r=0;r<this._userHandlers[t].length;r++)if(this._userHandlers[t][r]===e)return!0;return!1},o.prototype.removeListener=function(t,e){if(!this.enabled)throw new Error("WebMidi must be enabled before removing event listeners.");if(void 0!==e&&"function"!=typeof e)throw new TypeError("The 'listener' parameter must be a function.");if(0<=this._midiInterfaceEvents.indexOf(t))if(e)for(var r=0;r<this._userHandlers[t].length;r++)this._userHandlers[t][r]===e&&this._userHandlers[t].splice(r,1);else this._userHandlers[t]=[];else{if(void 0!==t)throw new TypeError("The specified event type is not supported.");this._resetInterfaceUserHandlers()}return this},o.prototype.toMIDIChannels=function(t){var e;if("all"===t||void 0===t)e=["all"];else{if("none"===t)return[];e=Array.isArray(t)?t:[t]}return-1<e.indexOf("all")&&(e=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),e.map((function(t){return parseInt(t)})).filter((function(t){return 1<=t&&t<=16}))},o.prototype.getInputById=function(t){if(!this.enabled)throw new Error("WebMidi is not enabled.");t=String(t);for(var e=0;e<this.inputs.length;e++)if(this.inputs[e].id===t)return this.inputs[e];return!1},o.prototype.getOutputById=function(t){if(!this.enabled)throw new Error("WebMidi is not enabled.");t=String(t);for(var e=0;e<this.outputs.length;e++)if(this.outputs[e].id===t)return this.outputs[e];return!1},o.prototype.getInputByName=function(t){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var e=0;e<this.inputs.length;e++)if(~this.inputs[e].name.indexOf(t))return this.inputs[e];return!1},o.prototype.getOctave=function(t){if(null!=t&&0<=t&&t<=127)return Math.floor(Math.floor(t)/12-1)+Math.floor(i.octaveOffset)},o.prototype.getOutputByName=function(t){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var e=0;e<this.outputs.length;e++)if(~this.outputs[e].name.indexOf(t))return this.outputs[e];return!1},o.prototype.guessNoteNumber=function(t){var e=!1;if(t&&t.toFixed&&0<=t&&t<=127?e=Math.round(t):0<=parseInt(t)&&parseInt(t)<=127?e=parseInt(t):("string"==typeof t||t instanceof String)&&(e=this.noteNameToNumber(t)),!1===e)throw new Error("Invalid input value ("+t+").");return e},o.prototype.noteNameToNumber=function(t){"string"!=typeof t&&(t="");var e=t.match(/([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)/i);if(!e)throw new RangeError("Invalid note name.");var r=i._semitones[e[1].toUpperCase()],n=12*(parseInt(e[3])+1-Math.floor(i.octaveOffset))+r;if(-1<e[2].toLowerCase().indexOf("b")?n-=e[2].length:-1<e[2].toLowerCase().indexOf("#")&&(n+=e[2].length),n<0||127<n)throw new RangeError("Invalid note name or note outside valid range.");return n},o.prototype._updateInputsAndOutputs=function(){this._updateInputs(),this._updateOutputs()},o.prototype._updateInputs=function(){for(var t=0;t<this._inputs.length;t++){for(var e=!0,r=this.interface.inputs.values(),n=r.next();n&&!n.done;n=r.next())if(this._inputs[t]._midiInput===n.value){e=!1;break}e&&this._inputs.splice(t,1)}this.interface&&this.interface.inputs.forEach(function(t){for(var e=!0,r=0;r<this._inputs.length;r++)this._inputs[r]._midiInput===t&&(e=!1);e&&this._inputs.push(new a(t))}.bind(this))},o.prototype._updateOutputs=function(){for(var t=0;t<this._outputs.length;t++){for(var e=!0,r=this.interface.outputs.values(),n=r.next();n&&!n.done;n=r.next())if(this._outputs[t]._midiOutput===n.value){e=!1;break}e&&this._outputs.splice(t,1)}this.interface&&this.interface.outputs.forEach(function(t){for(var e=!0,r=0;r<this._outputs.length;r++)this._outputs[r]._midiOutput===t&&(e=!1);e&&this._outputs.push(new s(t))}.bind(this))},o.prototype._onInterfaceStateChange=function(t){this._updateInputsAndOutputs();var e={timestamp:t.timeStamp,type:t.port.state};this.interface&&"connected"===t.port.state?"output"===t.port.type?e.port=this.getOutputById(t.port.id):"input"===t.port.type&&(e.port=this.getInputById(t.port.id)):e.port={connection:"closed",id:t.port.id,manufacturer:t.port.manufacturer,name:t.port.name,state:t.port.state,type:t.port.type},this._userHandlers[t.port.state].forEach((function(t){t(e)}))},o.prototype._resetInterfaceUserHandlers=function(){for(var t=0;t<this._midiInterfaceEvents.length;t++)this._userHandlers[this._midiInterfaceEvents[t]]=[]},a.prototype.on=a.prototype.addListener=function(t,e,r){var n=this;if(void 0===e&&(e="all"),Array.isArray(e)||(e=[e]),e.forEach((function(t){if("all"!==t&&!(1<=t&&t<=16))throw new RangeError("The 'channel' parameter is invalid.")})),"function"!=typeof r)throw new TypeError("The 'listener' parameter must be a function.");if(void 0!==i.MIDI_SYSTEM_MESSAGES[t])this._userHandlers.system[t]||(this._userHandlers.system[t]=[]),this._userHandlers.system[t].push(r);else{if(void 0===i.MIDI_CHANNEL_MESSAGES[t])throw new TypeError("The specified event type is not supported.");if(-1<e.indexOf("all")){e=[];for(var o=1;o<=16;o++)e.push(o)}this._userHandlers.channel[t]||(this._userHandlers.channel[t]=[]),e.forEach((function(e){n._userHandlers.channel[t][e]||(n._userHandlers.channel[t][e]=[]),n._userHandlers.channel[t][e].push(r)}))}return this},a.prototype.hasListener=function(t,e,r){var n=this;if("function"!=typeof r)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===e&&(e="all"),e.constructor!==Array&&(e=[e]),void 0!==i.MIDI_SYSTEM_MESSAGES[t]){for(var o=0;o<this._userHandlers.system[t].length;o++)if(this._userHandlers.system[t][o]===r)return!0}else if(void 0!==i.MIDI_CHANNEL_MESSAGES[t]){if(-1<e.indexOf("all")){e=[];for(var a=1;a<=16;a++)e.push(a)}return!!this._userHandlers.channel[t]&&e.every((function(e){var o=n._userHandlers.channel[t][e];return o&&-1<o.indexOf(r)}))}return!1},a.prototype.removeListener=function(t,e,r){var n=this;if(void 0!==r&&"function"!=typeof r)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===e&&(e="all"),e.constructor!==Array&&(e=[e]),void 0!==i.MIDI_SYSTEM_MESSAGES[t])if(void 0===r)this._userHandlers.system[t]=[];else for(var o=0;o<this._userHandlers.system[t].length;o++)this._userHandlers.system[t][o]===r&&this._userHandlers.system[t].splice(o,1);else if(void 0!==i.MIDI_CHANNEL_MESSAGES[t]){if(-1<e.indexOf("all")){e=[];for(var a=1;a<=16;a++)e.push(a)}if(!this._userHandlers.channel[t])return this;e.forEach((function(e){var o=n._userHandlers.channel[t][e];if(o)if(void 0===r)n._userHandlers.channel[t][e]=[];else for(var i=0;i<o.length;i++)o[i]===r&&o.splice(i,1)}))}else{if(void 0!==t)throw new TypeError("The specified event type is not supported.");this._initializeUserHandlers()}return this},a.prototype._initializeUserHandlers=function(){for(var t in i.MIDI_CHANNEL_MESSAGES)i.MIDI_CHANNEL_MESSAGES.hasOwnProperty(t)&&(this._userHandlers.channel[t]={});for(var e in i.MIDI_SYSTEM_MESSAGES)i.MIDI_SYSTEM_MESSAGES.hasOwnProperty(e)&&(this._userHandlers.system[e]=[])},a.prototype._onMidiMessage=function(t){if(0<this._userHandlers.system.midimessage.length){var e={target:this,data:t.data,timestamp:t.timeStamp,type:"midimessage"};this._userHandlers.system.midimessage.forEach((function(t){t(e)}))}t.data[0]<240?(this._parseChannelEvent(t),this._parseNrpnEvent(t)):t.data[0]<=255&&this._parseSystemEvent(t)},a.prototype._parseNrpnEvent=function(t){var e,r,n=t.data[0]>>4,o=15&t.data[0],a=1+o;if(1<t.data.length&&(e=t.data[1],r=2<t.data.length?t.data[2]:void 0),i.nrpnEventsEnabled&&n===i.MIDI_CHANNEL_MESSAGES.controlchange&&(e>=i.MIDI_NRPN_MESSAGES.increment&&e<=i.MIDI_NRPN_MESSAGES.parammsb||e===i.MIDI_NRPN_MESSAGES.entrymsb||e===i.MIDI_NRPN_MESSAGES.entrylsb)){var s={target:this,type:"controlchange",data:t.data,timestamp:t.timeStamp,channel:a,controller:{number:e,name:this.getCcNameByNumber(e)},value:r};if(s.controller.number===i.MIDI_NRPN_MESSAGES.parammsb&&s.value!=i.MIDI_NRPN_MESSAGES.nullactiveparameter)i._nrpnBuffer[o]=[],i._nrpnBuffer[o][0]=s;else if(1===i._nrpnBuffer[o].length&&s.controller.number===i.MIDI_NRPN_MESSAGES.paramlsb)i._nrpnBuffer[o].push(s);else if(2!==i._nrpnBuffer[o].length||s.controller.number!==i.MIDI_NRPN_MESSAGES.increment&&s.controller.number!==i.MIDI_NRPN_MESSAGES.decrement&&s.controller.number!==i.MIDI_NRPN_MESSAGES.entrymsb)if(3===i._nrpnBuffer[o].length&&i._nrpnBuffer[o][2].number===i.MIDI_NRPN_MESSAGES.entrymsb&&s.controller.number===i.MIDI_NRPN_MESSAGES.entrylsb)i._nrpnBuffer[o].push(s);else if(3<=i._nrpnBuffer[o].length&&i._nrpnBuffer[o].length<=4&&s.controller.number===i.MIDI_NRPN_MESSAGES.parammsb&&s.value===i.MIDI_NRPN_MESSAGES.nullactiveparameter)i._nrpnBuffer[o].push(s);else if(4<=i._nrpnBuffer[o].length&&i._nrpnBuffer[o].length<=5&&s.controller.number===i.MIDI_NRPN_MESSAGES.paramlsb&&s.value===i.MIDI_NRPN_MESSAGES.nullactiveparameter){i._nrpnBuffer[o].push(s);var c=[];i._nrpnBuffer[o].forEach((function(t){c.push(t.data)}));var u=i._nrpnBuffer[o][0].value<<7|i._nrpnBuffer[o][1].value,l=i._nrpnBuffer[o][2].value;6===i._nrpnBuffer[o].length&&(l=i._nrpnBuffer[o][2].value<<7|i._nrpnBuffer[o][3].value);var p="";switch(i._nrpnBuffer[o][2].controller.number){case i.MIDI_NRPN_MESSAGES.entrymsb:p=i._nrpnTypes[0];break;case i.MIDI_NRPN_MESSAGES.increment:p=i._nrpnTypes[1];break;case i.MIDI_NRPN_MESSAGES.decrement:p=i._nrpnTypes[2];break;default:throw new Error("The NPRN type was unidentifiable.")}var h={timestamp:s.timestamp,channel:s.channel,type:"nrpn",data:c,controller:{number:u,type:p,name:"Non-Registered Parameter "+u},value:l};i._nrpnBuffer[o]=[],this._userHandlers.channel[h.type]&&this._userHandlers.channel[h.type][h.channel]&&this._userHandlers.channel[h.type][h.channel].forEach((function(t){t(h)}))}else i._nrpnBuffer[o]=[];else i._nrpnBuffer[o].push(s)}},a.prototype._parseChannelEvent=function(t){var e,r,n=t.data[0]>>4,o=1+(15&t.data[0]);1<t.data.length&&(e=t.data[1],r=2<t.data.length?t.data[2]:void 0);var a={target:this,data:t.data,timestamp:t.timeStamp,channel:o};n===i.MIDI_CHANNEL_MESSAGES.noteoff||n===i.MIDI_CHANNEL_MESSAGES.noteon&&0===r?(a.type="noteoff",a.note={number:e,name:i._notes[e%12],octave:i.getOctave(e)},a.velocity=r/127,a.rawVelocity=r):n===i.MIDI_CHANNEL_MESSAGES.noteon?(a.type="noteon",a.note={number:e,name:i._notes[e%12],octave:i.getOctave(e)},a.velocity=r/127,a.rawVelocity=r):n===i.MIDI_CHANNEL_MESSAGES.keyaftertouch?(a.type="keyaftertouch",a.note={number:e,name:i._notes[e%12],octave:i.getOctave(e)},a.value=r/127):n===i.MIDI_CHANNEL_MESSAGES.controlchange&&0<=e&&e<=119?(a.type="controlchange",a.controller={number:e,name:this.getCcNameByNumber(e)},a.value=r):n===i.MIDI_CHANNEL_MESSAGES.channelmode&&120<=e&&e<=127?(a.type="channelmode",a.controller={number:e,name:this.getChannelModeByNumber(e)},a.value=r):n===i.MIDI_CHANNEL_MESSAGES.programchange?(a.type="programchange",a.value=e):n===i.MIDI_CHANNEL_MESSAGES.channelaftertouch?(a.type="channelaftertouch",a.value=e/127):n===i.MIDI_CHANNEL_MESSAGES.pitchbend?(a.type="pitchbend",a.value=((r<<7)+e-8192)/8192):a.type="unknownchannelmessage",this._userHandlers.channel[a.type]&&this._userHandlers.channel[a.type][o]&&this._userHandlers.channel[a.type][o].forEach((function(t){t(a)}))},a.prototype.getCcNameByNumber=function(t){if(!(0<=(t=Math.floor(t))&&t<=119))throw new RangeError("The control change number must be between 0 and 119.");for(var e in i.MIDI_CONTROL_CHANGE_MESSAGES)if(i.MIDI_CONTROL_CHANGE_MESSAGES.hasOwnProperty(e)&&t===i.MIDI_CONTROL_CHANGE_MESSAGES[e])return e},a.prototype.getChannelModeByNumber=function(t){if(!(120<=(t=Math.floor(t))&&status<=127))throw new RangeError("The control change number must be between 120 and 127.");for(var e in i.MIDI_CHANNEL_MODE_MESSAGES)if(i.MIDI_CHANNEL_MODE_MESSAGES.hasOwnProperty(e)&&t===i.MIDI_CHANNEL_MODE_MESSAGES[e])return e},a.prototype._parseSystemEvent=function(t){var e=t.data[0],r={target:this,data:t.data,timestamp:t.timeStamp};e===i.MIDI_SYSTEM_MESSAGES.sysex?r.type="sysex":e===i.MIDI_SYSTEM_MESSAGES.timecode?r.type="timecode":e===i.MIDI_SYSTEM_MESSAGES.songposition?r.type="songposition":e===i.MIDI_SYSTEM_MESSAGES.songselect?(r.type="songselect",r.song=t.data[1]):e===i.MIDI_SYSTEM_MESSAGES.tuningrequest?r.type="tuningrequest":e===i.MIDI_SYSTEM_MESSAGES.clock?r.type="clock":e===i.MIDI_SYSTEM_MESSAGES.start?r.type="start":e===i.MIDI_SYSTEM_MESSAGES.continue?r.type="continue":e===i.MIDI_SYSTEM_MESSAGES.stop?r.type="stop":e===i.MIDI_SYSTEM_MESSAGES.activesensing?r.type="activesensing":e===i.MIDI_SYSTEM_MESSAGES.reset?r.type="reset":r.type="unknownsystemmessage",this._userHandlers.system[r.type]&&this._userHandlers.system[r.type].forEach((function(t){t(r)}))},s.prototype.send=function(t,e,r){if(!(128<=t&&t<=255))throw new RangeError("The status byte must be an integer between 128 (0x80) and 255 (0xFF).");void 0===e&&(e=[]),Array.isArray(e)||(e=[e]);var n=[];return e.forEach((function(t){var e=Math.floor(t);if(!(0<=e&&e<=255))throw new RangeError("Data bytes must be integers between 0 (0x00) and 255 (0xFF).");n.push(e)})),this._midiOutput.send([t].concat(n),parseFloat(r)||0),this},s.prototype.sendSysex=function(t,e,r){if(!i.sysexEnabled)throw new Error("Sysex message support must first be activated.");return r=r||{},t=[].concat(t),e.forEach((function(t){if(t<0||127<t)throw new RangeError("The data bytes of a sysex message must be integers between 0 (0x00) and 127 (0x7F).")})),e=t.concat(e,i.MIDI_SYSTEM_MESSAGES.sysexend),this.send(i.MIDI_SYSTEM_MESSAGES.sysex,e,this._parseTimeParameter(r.time)),this},s.prototype.sendTimecodeQuarterFrame=function(t,e){return e=e||{},this.send(i.MIDI_SYSTEM_MESSAGES.timecode,t,this._parseTimeParameter(e.time)),this},s.prototype.sendSongPosition=function(t,e){e=e||{};var r=(t=Math.floor(t)||0)>>7&127,n=127&t;return this.send(i.MIDI_SYSTEM_MESSAGES.songposition,[r,n],this._parseTimeParameter(e.time)),this},s.prototype.sendSongSelect=function(t,e){if(e=e||{},!(0<=(t=Math.floor(t))&&t<=127))throw new RangeError("The song number must be between 0 and 127.");return this.send(i.MIDI_SYSTEM_MESSAGES.songselect,[t],this._parseTimeParameter(e.time)),this},s.prototype.sendTuningRequest=function(t){return t=t||{},this.send(i.MIDI_SYSTEM_MESSAGES.tuningrequest,void 0,this._parseTimeParameter(t.time)),this},s.prototype.sendClock=function(t){return t=t||{},this.send(i.MIDI_SYSTEM_MESSAGES.clock,void 0,this._parseTimeParameter(t.time)),this},s.prototype.sendStart=function(t){return t=t||{},this.send(i.MIDI_SYSTEM_MESSAGES.start,void 0,this._parseTimeParameter(t.time)),this},s.prototype.sendContinue=function(t){return t=t||{},this.send(i.MIDI_SYSTEM_MESSAGES.continue,void 0,this._parseTimeParameter(t.time)),this},s.prototype.sendStop=function(t){return t=t||{},this.send(i.MIDI_SYSTEM_MESSAGES.stop,void 0,this._parseTimeParameter(t.time)),this},s.prototype.sendActiveSensing=function(t){return t=t||{},this.send(i.MIDI_SYSTEM_MESSAGES.activesensing,[],this._parseTimeParameter(t.time)),this},s.prototype.sendReset=function(t){return t=t||{},this.send(i.MIDI_SYSTEM_MESSAGES.reset,void 0,this._parseTimeParameter(t.time)),this},s.prototype.stopNote=function(t,e,r){if("all"===t)return this.sendChannelMode("allnotesoff",0,e,r);var n=64;return(r=r||{}).rawVelocity?!isNaN(r.velocity)&&0<=r.velocity&&r.velocity<=127&&(n=r.velocity):!isNaN(r.velocity)&&0<=r.velocity&&r.velocity<=1&&(n=127*r.velocity),this._convertNoteToArray(t).forEach(function(t){i.toMIDIChannels(e).forEach(function(e){this.send((i.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(e-1),[t,Math.round(n)],this._parseTimeParameter(r.time))}.bind(this))}.bind(this)),this},s.prototype.playNote=function(t,e,r){var n,o=64;if((r=r||{}).rawVelocity?!isNaN(r.velocity)&&0<=r.velocity&&r.velocity<=127&&(o=r.velocity):!isNaN(r.velocity)&&0<=r.velocity&&r.velocity<=1&&(o=127*r.velocity),n=this._parseTimeParameter(r.time),this._convertNoteToArray(t).forEach(function(t){i.toMIDIChannels(e).forEach(function(e){this.send((i.MIDI_CHANNEL_MESSAGES.noteon<<4)+(e-1),[t,Math.round(o)],n)}.bind(this))}.bind(this)),!isNaN(r.duration)){r.duration<=0&&(r.duration=0);var a=64;r.rawVelocity?!isNaN(r.release)&&0<=r.release&&r.release<=127&&(a=r.release):!isNaN(r.release)&&0<=r.release&&r.release<=1&&(a=127*r.release),this._convertNoteToArray(t).forEach(function(t){i.toMIDIChannels(e).forEach(function(e){this.send((i.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(e-1),[t,Math.round(a)],(n||i.time)+r.duration)}.bind(this))}.bind(this))}return this},s.prototype.sendKeyAftertouch=function(t,e,r,n){var o=this;if(n=n||{},e<1||16<e)throw new RangeError("The channel must be between 1 and 16.");(isNaN(r)||r<0||1<r)&&(r=.5);var a=Math.round(127*r);return this._convertNoteToArray(t).forEach((function(t){i.toMIDIChannels(e).forEach((function(e){o.send((i.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4)+(e-1),[t,a],o._parseTimeParameter(n.time))}))})),this},s.prototype.sendControlChange=function(t,e,r,n){if(n=n||{},"string"==typeof t){if(void 0===(t=i.MIDI_CONTROL_CHANGE_MESSAGES[t]))throw new TypeError("Invalid controller name.")}else if(!(0<=(t=Math.floor(t))&&t<=119))throw new RangeError("Controller numbers must be between 0 and 119.");if(!(0<=(e=Math.floor(e)||0)&&e<=127))throw new RangeError("Controller value must be between 0 and 127.");return i.toMIDIChannels(r).forEach(function(r){this.send((i.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(r-1),[t,e],this._parseTimeParameter(n.time))}.bind(this)),this},s.prototype._selectRegisteredParameter=function(t,e,r){var n=this;if(t[0]=Math.floor(t[0]),!(0<=t[0]&&t[0]<=127))throw new RangeError("The control65 value must be between 0 and 127");if(t[1]=Math.floor(t[1]),!(0<=t[1]&&t[1]<=127))throw new RangeError("The control64 value must be between 0 and 127");return i.toMIDIChannels(e).forEach((function(){n.sendControlChange(101,t[0],e,{time:r}),n.sendControlChange(100,t[1],e,{time:r})})),this},s.prototype._selectNonRegisteredParameter=function(t,e,r){var n=this;if(t[0]=Math.floor(t[0]),!(0<=t[0]&&t[0]<=127))throw new RangeError("The control63 value must be between 0 and 127");if(t[1]=Math.floor(t[1]),!(0<=t[1]&&t[1]<=127))throw new RangeError("The control62 value must be between 0 and 127");return i.toMIDIChannels(e).forEach((function(){n.sendControlChange(99,t[0],e,{time:r}),n.sendControlChange(98,t[1],e,{time:r})})),this},s.prototype._setCurrentRegisteredParameter=function(t,e,r){var n=this;if((t=[].concat(t))[0]=Math.floor(t[0]),!(0<=t[0]&&t[0]<=127))throw new RangeError("The msb value must be between 0 and 127");return i.toMIDIChannels(e).forEach((function(){n.sendControlChange(6,t[0],e,{time:r})})),t[1]=Math.floor(t[1]),0<=t[1]&&t[1]<=127&&i.toMIDIChannels(e).forEach((function(){n.sendControlChange(38,t[1],e,{time:r})})),this},s.prototype._deselectRegisteredParameter=function(t,e){var r=this;return i.toMIDIChannels(t).forEach((function(){r.sendControlChange(101,127,t,{time:e}),r.sendControlChange(100,127,t,{time:e})})),this},s.prototype.setRegisteredParameter=function(t,e,r,n){var o=this;if(n=n||{},!Array.isArray(t)){if(!i.MIDI_REGISTERED_PARAMETER[t])throw new Error("The specified parameter is not available.");t=i.MIDI_REGISTERED_PARAMETER[t]}return i.toMIDIChannels(r).forEach((function(){o._selectRegisteredParameter(t,r,n.time),o._setCurrentRegisteredParameter(e,r,n.time),o._deselectRegisteredParameter(r,n.time)})),this},s.prototype.setNonRegisteredParameter=function(t,e,r,n){var o=this;if(n=n||{},!(0<=t[0]&&t[0]<=127&&0<=t[1]&&t[1]<=127))throw new Error("Position 0 and 1 of the 2-position parameter array must both be between 0 and 127.");return e=[].concat(e),i.toMIDIChannels(r).forEach((function(){o._selectNonRegisteredParameter(t,r,n.time),o._setCurrentRegisteredParameter(e,r,n.time),o._deselectRegisteredParameter(r,n.time)})),this},s.prototype.incrementRegisteredParameter=function(t,e,r){var n=this;if(r=r||{},!Array.isArray(t)){if(!i.MIDI_REGISTERED_PARAMETER[t])throw new Error("The specified parameter is not available.");t=i.MIDI_REGISTERED_PARAMETER[t]}return i.toMIDIChannels(e).forEach((function(){n._selectRegisteredParameter(t,e,r.time),n.sendControlChange(96,0,e,{time:r.time}),n._deselectRegisteredParameter(e,r.time)})),this},s.prototype.decrementRegisteredParameter=function(t,e,r){if(r=r||{},!Array.isArray(t)){if(!i.MIDI_REGISTERED_PARAMETER[t])throw new TypeError("The specified parameter is not available.");t=i.MIDI_REGISTERED_PARAMETER[t]}return i.toMIDIChannels(e).forEach(function(){this._selectRegisteredParameter(t,e,r.time),this.sendControlChange(97,0,e,{time:r.time}),this._deselectRegisteredParameter(e,r.time)}.bind(this)),this},s.prototype.setPitchBendRange=function(t,e,r,n){var o=this;if(n=n||{},!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(e=Math.floor(e)||0)&&e<=127))throw new RangeError("The cents value must be between 0 and 127");return i.toMIDIChannels(r).forEach((function(){o.setRegisteredParameter("pitchbendrange",[t,e],r,{time:n.time})})),this},s.prototype.setModulationRange=function(t,e,r,n){var o=this;if(n=n||{},!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(e=Math.floor(e)||0)&&e<=127))throw new RangeError("The cents value must be between 0 and 127");return i.toMIDIChannels(r).forEach((function(){o.setRegisteredParameter("modulationrange",[t,e],r,{time:n.time})})),this},s.prototype.setMasterTuning=function(t,e,r){var n=this;if(r=r||{},(t=parseFloat(t)||0)<=-65||64<=t)throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");var o=Math.floor(t)+64,a=t-Math.floor(t),s=(a=Math.round((a+1)/2*16383))>>7&127,c=127&a;return i.toMIDIChannels(e).forEach((function(){n.setRegisteredParameter("channelcoarsetuning",o,e,{time:r.time}),n.setRegisteredParameter("channelfinetuning",[s,c],e,{time:r.time})})),this},s.prototype.setTuningProgram=function(t,e,r){var n=this;if(r=r||{},!(0<=(t=Math.floor(t))&&t<=127))throw new RangeError("The program value must be between 0 and 127");return i.toMIDIChannels(e).forEach((function(){n.setRegisteredParameter("tuningprogram",t,e,{time:r.time})})),this},s.prototype.setTuningBank=function(t,e,r){var n=this;if(r=r||{},!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("The bank value must be between 0 and 127");return i.toMIDIChannels(e).forEach((function(){n.setRegisteredParameter("tuningbank",t,e,{time:r.time})})),this},s.prototype.sendChannelMode=function(t,e,r,n){if(n=n||{},"string"==typeof t){if(!(t=i.MIDI_CHANNEL_MODE_MESSAGES[t]))throw new TypeError("Invalid channel mode message name.")}else if(!(120<=(t=Math.floor(t))&&t<=127))throw new RangeError("Channel mode numerical identifiers must be between 120 and 127.");if((e=Math.floor(e)||0)<0||127<e)throw new RangeError("Value must be an integer between 0 and 127.");return i.toMIDIChannels(r).forEach(function(r){this.send((i.MIDI_CHANNEL_MESSAGES.channelmode<<4)+(r-1),[t,e],this._parseTimeParameter(n.time))}.bind(this)),this},s.prototype.sendProgramChange=function(t,e,r){var n=this;if(r=r||{},t=Math.floor(t),isNaN(t)||t<0||127<t)throw new RangeError("Program numbers must be between 0 and 127.");return i.toMIDIChannels(e).forEach((function(e){n.send((i.MIDI_CHANNEL_MESSAGES.programchange<<4)+(e-1),[t],n._parseTimeParameter(r.time))})),this},s.prototype.sendChannelAftertouch=function(t,e,r){var n=this;r=r||{},t=parseFloat(t),(isNaN(t)||t<0||1<t)&&(t=.5);var o=Math.round(127*t);return i.toMIDIChannels(e).forEach((function(t){n.send((i.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4)+(t-1),[o],n._parseTimeParameter(r.time))})),this},s.prototype.sendPitchBend=function(t,e,r){var n=this;if(r=r||{},isNaN(t)||t<-1||1<t)throw new RangeError("Pitch bend value must be between -1 and 1.");var o=Math.round((t+1)/2*16383),a=o>>7&127,s=127&o;return i.toMIDIChannels(e).forEach((function(t){n.send((i.MIDI_CHANNEL_MESSAGES.pitchbend<<4)+(t-1),[s,a],n._parseTimeParameter(r.time))})),this},s.prototype._parseTimeParameter=function(t){var e,r=parseFloat(t);return"string"==typeof t&&"+"===t.substring(0,1)?r&&0<r&&(e=i.time+r):r>i.time&&(e=r),e},s.prototype._convertNoteToArray=function(t){var e=[];return Array.isArray(t)||(t=[t]),t.forEach((function(t){e.push(i.guessNoteNumber(t))})),e},void 0===(n=function(){return i}.apply(e,[]))||(t.exports=n)}()},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.createFFT=void 0;const o=r(9),i=r(0);let a=class extends o.VisBase{constructor(){super(...arguments),this.height=40}generate(){}loop(){if(requestAnimationFrame(this.loop.bind(this)),!this.tone)return;const t=this.tone.getValue();this.draw(t)}bind(t){this.tone=t,this.loop()}};a=n([i.customElement("tone-fft-vis")],a),e.createFFT=function({tone:t,parent:e,height:r}){const n=document.createElement("tone-fft-vis");return n.bind(t),e&&e.appendChild(n),r&&n.setAttribute("height",r.toString()),n}}])}));